
// Provide a default path to dwr.engine
if (dwr == null) var dwr = {};
if (dwr.engine == null) dwr.engine = {};
if (DWREngine == null) var DWREngine = dwr.engine;

if (ToggleFeatured == null) var ToggleFeatured = {};
ToggleFeatured._path = '/dwr';
ToggleFeatured.toggleFeatured = function(p0, p1, p2, p3, callback) {
  dwr.engine._execute(ToggleFeatured._path, 'ToggleFeatured', 'toggleFeatured', p0, p1, p2, p3, callback);
}

;
$j(document).ready(function(){$j("#j-place-parents-link").click(function(a){$j("#j-place-parents-container").popover({context:$j("#j-place-parents-link"),darkPopover:true,destroyOnClose:false});a.preventDefault()})});
;
jive.LocationState=jive.oo.Class.extend(function(a){var b=jQuery;jive.conc.observable(this);a.defaults={supportPushState:true,supportFragment:true};a.init=function(c){var f=b.extend({},this.defaults,c||{}),e=location.href,g=this;this.location=e;this.description="";this.manuallyUpdatingHash=false;this.supportPushState=f.supportPushState&&!!(window.history&&window.history.pushState);this.supportFragment=f.supportFragment;var d=[this.supportPushState?"popstate":null,this.supportFragment?"hashchange":null].filter(function(h){return !!h}).join(" ");b(window).bind(d,function(i){var h=location.href;if(g.afterInit||h!==e){g.location=h;if(!g.manuallyUpdatingHash){g.emitChange(g.current(),g.description,h)}g.manuallyUpdatingHash=false}})};this.get=function(c){return this.current()[c]};this.getState=function(){return this.current()};this.getEphemeralState=function(){return b.deparam.fragment()};this.pushState=function(e,c){var d=b.extend(this.current(),e);Object.keys(e).forEach(function(f){if(typeof e[f]=="undefined"||(b.isArray(e[f])&&e[f].length<1)){delete d[f]}});this.setState(d,c)};this.setState=function(f,e,d){var c=this.lastLocation;this.location=this.supportPushState?this.newLocation(f,d):this.newFragment(f,d);this.description=e||"";this.emitChange(f,e,this.location);if(this.location!==c){if(this.supportPushState){history.pushState(this.current(),this.description,this.location)}else{if(this.supportFragment){this.updateLocationHash(this.location)}}}};a.current=function(){var d=this.location.match(/\?/)?b.deparam.querystring(this.location):{},c=this.location.match(/#/)?b.deparam.fragment(this.location):{};return b.extend({},d,c)};a.newLocation=function(d,c){var e;if(!c){e=location.href.split(/[?#]/)[0]}else{e=jive.app.url({path:"/"+c})}return b.param.querystring(e,d)};a.newFragment=function(g,e){var c={},f=b.deparam.querystring(),h;h=location.href.split("#")[0];if(e){g.nPLoc=e}Object.keys(g).forEach(function(i){if(f[i]!==String(g[i])){c[i]=g[i]}});var d=b.param.fragment(h,c);if(/#[^=&]+=$/.test(d)){d=d.substring(0,d.length-1)}return d};a.emitChange=function(e,d,c){if(c!==this.lastLocation){this.emit("change",e,d,c);this.lastLocation=c;this.afterInit=true}else{this.emit("noChange",e,d,c)}};a.updateLocationHash=function(d){var c=this;function e(){c.preserveScrollPosition(d.split("#")[1],function(){c.manuallyUpdatingHash=true;location.href=d})}if(b.browser.msie&&b.browser.version<8){(this.locationHashTimeouts||[]).forEach(function(f){clearTimeout(f)});this.locationHashTimeouts=[];this.locationHashTimeouts.push(setTimeout(function(){c.locationHashTimeouts.push(setTimeout(e,100))},100))}else{e()}};a.preserveScrollPosition=function(c,e){var d;if(c){d=b(window).scrollTop();e();b(window).scrollTop(d)}else{e()}}});jive.locationState=new jive.LocationState();
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.shared=="undefined"){jive.shared={}}if(typeof jive.shared.soy=="undefined"){jive.shared.soy={}}jive.shared.soy.paginationLinks=function(A,F){var C=F||new soy.StringBuilder();C.append('<div class="j-pagination"',(A.elementID)?'id="'+soy.$$escapeHtmlAttribute(A.elementID)+'"':"",(A.max<=1&&!A.alwaysShow)?'style="display:none"':"",">");if(A.current>=1){jive.shared.soy.numberedPageLink(soy.$$augmentData(A,{number:1,active:A.current==1}),C)}C.append((A.current>5)?'<span class="ellipsis">&hellip;</span>':"");var B=A.current-3;var E=A.current+4;for(var D=B;D<E;D++){if(D>1&&D<=A.max){jive.shared.soy.numberedPageLink(soy.$$augmentData(A,{number:D,active:A.current==D}),C)}}C.append((A.max>A.current+4)?'<span class="ellipsis">&hellip;</span>':"");if(A.max>A.current+3){jive.shared.soy.numberedPageLink(soy.$$augmentData(A,{number:A.max}),C)}C.append('<span class="j-pagination-prevnext">');if(A.current>1){C.append('<a href="');jive.shared.soy.pageUrl__C2bf6(soy.$$augmentData(A,{page:A.current-1}),C);C.append('" class="j-pagination-prev" title="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("global.previous_page_title"),[])),'" data-start="');jive.shared.soy.pageToStart__Cce8(soy.$$augmentData(A,{page:A.current-1}),C);C.append('">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.previous"),[])),"</a>")}else{C.append('<span class="j-pagination-prev j-disabled font-color-meta">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.previous"),[])),"</span>")}if(A.current<A.max){C.append('<a href="');jive.shared.soy.pageUrl__C2bf6(soy.$$augmentData(A,{page:A.current+1}),C);C.append('" class="j-pagination-next" title="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("global.next_page_title"),[])),'" data-start="');jive.shared.soy.pageToStart__Cce8(soy.$$augmentData(A,{page:A.current+1}),C);C.append('">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.next"),[])),"</a>")}else{C.append('<span class="j-pagination-next j-disabled font-color-meta">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.next"),[])),"</span>")}C.append("</span></div>");return F?"":C.toString()};jive.shared.soy.numberedPageLink=function(A,C){var B=C||new soy.StringBuilder();if(A.active){B.append('<a href="');jive.shared.soy.pageUrl__C2bf6(soy.$$augmentData(A,{page:A.number}),B);B.append('" class="j-pagination-current font-color-normal" title="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("global.numbered_page_title"),[A.number])),'" data-start="');jive.shared.soy.pageToStart__Cce8(soy.$$augmentData(A,{page:A.number}),B);B.append('"><strong>',soy.$$escapeHtml(A.number),"</strong></a>")}else{B.append('<a href="');jive.shared.soy.pageUrl__C2bf6(soy.$$augmentData(A,{page:A.number}),B);B.append('" title="',soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("global.numbered_page_title"),[A.number])),'" data-start="');jive.shared.soy.pageToStart__Cce8(soy.$$augmentData(A,{page:A.number}),B);B.append('">',soy.$$escapeHtml(A.number),"</a>")}return C?"":B.toString()};jive.shared.soy.pageUrl=function(A,C){var B=C||new soy.StringBuilder();B.append((A.urlParams)?soy.$$escapeHtml(A.urlPath)+soy.$$escapeHtml((Object.keys(jQuery.extend({},A.urlParams,(function(){var F={};var E=[["start",A.page>1?(A.page-1)*A.pageSize:[]]];for(var D=0;D<E.length;D+=1){F[E[D][0]]=E[D][1]}return F})())).length>0?"?"+jQuery.param(jQuery.extend({},A.urlParams,(function(){var F={};var E=[["start",A.page>1?(A.page-1)*A.pageSize:[]]];for(var D=0;D<E.length;D+=1){F[E[D][0]]=E[D][1]}return F})())):"")):soy.$$escapeHtml(A.urlPath)+soy.$$escapeHtml((Object.keys((function(){var F={};var E=[["start",A.page>1?(A.page-1)*A.pageSize:[]]];for(var D=0;D<E.length;D+=1){F[E[D][0]]=E[D][1]}return F})()).length>0?"?"+jQuery.param((function(){var F={};var E=[["start",A.page>1?(A.page-1)*A.pageSize:[]]];for(var D=0;D<E.length;D+=1){F[E[D][0]]=E[D][1]}return F})()):"")));return C?"":B.toString()};jive.shared.soy.pageToStart=function(A,C){var B=C||new soy.StringBuilder();B.append(soy.$$escapeHtml((A.page-1)*A.pageSize));return C?"":B.toString()};jive.shared.soy.pageUrl__C2bf6=function(A,C){var B=C||new soy.StringBuilder();B.append((A.urlParams)?soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(A.urlPath))+soy.$$escapeHtmlAttribute((Object.keys(jQuery.extend({},A.urlParams,(function(){var F={};var E=[["start",A.page>1?(A.page-1)*A.pageSize:[]]];for(var D=0;D<E.length;D+=1){F[E[D][0]]=E[D][1]}return F})())).length>0?"?"+jQuery.param(jQuery.extend({},A.urlParams,(function(){var F={};var E=[["start",A.page>1?(A.page-1)*A.pageSize:[]]];for(var D=0;D<E.length;D+=1){F[E[D][0]]=E[D][1]}return F})())):"")):soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(A.urlPath))+soy.$$escapeHtmlAttribute((Object.keys((function(){var F={};var E=[["start",A.page>1?(A.page-1)*A.pageSize:[]]];for(var D=0;D<E.length;D+=1){F[E[D][0]]=E[D][1]}return F})()).length>0?"?"+jQuery.param((function(){var F={};var E=[["start",A.page>1?(A.page-1)*A.pageSize:[]]];for(var D=0;D<E.length;D+=1){F[E[D][0]]=E[D][1]}return F})()):"")));return C?"":B.toString()};jive.shared.soy.pageToStart__Cce8=function(A,C){var B=C||new soy.StringBuilder();B.append(soy.$$escapeHtmlAttribute((A.page-1)*A.pageSize));return C?"":B.toString()}
;
jive.PaginationLinks=jive.AbstractView.extend(function(a){var b=jQuery;a.init=function(e){var d=this,c=".j-pagination";e=e||{};b(document).ready(function(){if(e.element){d.content=b(e.element||c)}else{d.content=b(jive.shared.soy.paginationLinks(e.params))}d.content.find("a[data-start]").click(function(g){var h=parseInt(b(this).data("start"),10),f=e.scrollTo?b(e.scrollTo):b();d.emit("start",h);if(f.length>0&&!d.inView(f)){b.scrollTo(f,200)}g.preventDefault()})})};a.inView=function(e){var g=b(window).scrollTop(),f=g+b(window).height(),c=b(e).offset().top,d=c+b(e).height();return((d>=g)&&(c<=f))}});
;
jive.Paginated=jive.oo.Class.extend(function(a){var c=jQuery,b;a.loadPage=jive.oo._abstract;a.initPagination=function(e,f){var d=this;f=f||{};this.defaultState=c.extend({start:0,numResults:20},e);this.promises=[];this.locationState=f.locationState||jive.locationState;this.paramFilter=f.paramFilter;this.linkViewClass=f.viewClass||jive.PaginationLinks;this.scrollTo=f.scrollTo;this.links=[];this.locationState.addListener("change",function(g){if(d.rollingBack){d.rollingBack=false;return}d.emitChange(g)});c(document).ready(function(){jive.conc.nextTick(function(){var g=d.locationState.getEphemeralState();if(Object.keys(g).length>0){d.emitChange(d.locationState.getState())}});if(c(f.paginationSelector||".j-pagination").length>0){d.links=c(f.paginationSelector||".j-pagination").toArray().map(function(g){return d.buildLinks({element:g})})}else{d.links=[d.buildLinks()]}})};a.pushState=function(i){var e=this.locationState.getState(),f=this.paramFilter?this.paramFilter(e):e,h=new jive.conc.Promise(),d=this;var g=Object.keys(i).reduce(function(l,j){if(d.defaultState.hasOwnProperty(j)&&d.deepEqual(d.defaultState[j],i[j])){l[j]=b}else{l[j]=i[j]}return l},{});Object.keys(f).forEach(function(j){if(f.hasOwnProperty(j)&&typeof f[j]=="undefined"){g[j]=b}});this.lastState=this.locationState.getState();this.locationState.pushState(g);this.promises.push(h);return h};a.getState=function(){return this.normalized(this.locationState.getState())};a.rollback=function(){if(this.lastState){this.rollingBack=true;this.locationState.setState(this.lastState)}};a.normalized=function(g){var e=this.paramFilter?this.paramFilter(g):g,f=c.extend({},this.defaultState,e),d=this;Object.keys(f).forEach(function(h){if(c.isArray(d.defaultState[h])&&!c.isArray(f[h])){f[h]=[f[h]]}else{if(c.isArray(d.defaultState[h])&&f[h].length<1){f[h]=d.defaultState[h]}}});return f};a.emitChange=function(e){var d=this,f=c(document.activeElement);d.loadPage(d.normalized(e)).addCallback(function(g,h){if(jQuery.contains(document.body,f[0])){if(f.is(":focusable")){f.focus()}}else{if(f.attr("id")){$j("#"+f.attr("id").replace(/[!"#$%&'()*+,.\/:;<=>?@\[\\\]^`{|}~]/g,"\\$&")).focus()}}d.updatePaginationLinks(g,h);d.promises.forEach(function(i){i.emitSuccess()});d.promises=[];c(".js-updatable-link").each(function(){var i=c(this),j=i.data("urlParams");if(j){i.attr("href",location.pathname+"?"+c.param(c.extend(e,j)))}})}).addErrback(function(){d.promises.forEach(function(g){g.emitError()});d.promises=[];d.rollback()})};a.buildLinks=function(f){f=f||{};var e=new this.linkViewClass(c.extend({},f,{params:c.extend({urlParams:this.locationState.getState(),urlPath:location.pathname,pageSize:this.getState().numResults},f.params),scrollTo:this.scrollTo})),d=this;if(!e._paginatedListening){e.addListener("start",function(g){d.setStart(g)});e.addListener("page",function(g){d.setPage(g)});e._paginatedListening=true}return e};a.updatePaginationLinks=function(e,f){var g=this.links,d=this;this.links=g.map(function(){return d.buildLinks({params:{current:e,max:f}})});g.forEach(function(h,j){h.replaceWith(d.links[j])})};a.setStart=function(e){var d=parseInt(e,10)||0;this.pushState({start:d})};a.setPage=function(d){this.setStart(this.pageToStart(d))};a.pageToStart=function(e,d){d=d||this.getState().numResults;return(e-1)*d};a.startToPage=function(e,d){d=d||this.getState().numResults;return(e/d)+1};a.deepEqual=function(e,d){if(c.isArray(e)&&c.isArray(d)){return e.length==d.length&&e.every(function(g,f){return g==d[f]})}else{if(c.isArray(e)||c.isArray(d)){return false}else{return e==d}}}});
;
jive.TabView=function(e,m){jive.conc.observable(this);m=m||{};var j=m.activeClass||"jive-body-tabcurrent",a=m.tabSelector||".jive-body-tab",d=m.nameFromTab||function(n){return n.attr("id").replace(/-tab$/,"")},h=this;function l(){return $j(e).find(a)}function c(){return l().filter(function(){return $j(this).hasClass(j)})}function g(){return d(l().filter(function(){return $j(this).hasClass(j)}))}function f(n){l().each(function(){var p=$j(this),o=d(p);p.toggleClass(j,o==n)});l().each(function(){var q=$j(this),p=d(q),o=$j('[id="'+p+'"]');if(p==n){o.show()}else{o.hide()}})}function k(n){h.emit("tabSwitch",n,c())}function i(n){f(n);k(n)}function b(o,p){var n=l().filter(function(){return d($j(this))==o});n.toggle(!!p)}this.switchTo=i;this.setVisibility=b;this.activeTabName=g;this.activeTab=c;$j(document).ready(function(){$j(e).delegate(a,"click",function(p){var o=$j(this),n=d(o);i(n);p.preventDefault()});if(!l().hasClass(j)){l().first().trigger("click")}})};
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.DiscussionApp=="undefined"){jive.DiscussionApp={}}if(typeof jive.DiscussionApp.soy=="undefined"){jive.DiscussionApp.soy={}}jive.DiscussionApp.soy.renderReply=function(A,C){var B=C||new soy.StringBuilder();B.append('<li class="addReply jive-js-addReply" style="display:none"><div msgID="',soy.$$escapeHtml(A.messageID),'" class="jive-thread-reply-indent0 jive-reply-add-inline"><div class="jive-thread-reply-indent-shadow"><div class="jive-thread-reply jive-thread-reply-self clearfix"><div class="jive-thread-reply-inline">',(A.moderated)?'<div id="jive-moderation-box" class="jive-content-moderation-box"><span class="jive-icon-med jive-icon-warn"></span>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("mod.content.create"),[]))+"</div>":"",'<strong class="font-color-meta">',soy.$$escapeHtml(A.i18n.forumThrdReplyTo),' <span class="replyToName">',soy.$$escapeHtml(A.userName),'</span> <img src="');jive.resource.url({path:"/images/inline-reply-arrow.png"},B);B.append('"></strong>',(A.externallyVisible=="true")?"":"",(A.anonymous)?'<div class="jive-comment-post-anonymous"><div><input id="reply-author" name="replyGuestName" type="text" required aria-required="true"><label for="reply-author">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.name"),[]))+'<span class="font-color-meta-light">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("blogs.vwpst.required.label"),[]))+'</span></label></div><div><input id="comment-email" name="replyGuestEmail" type="email" required aria-required="true"><label for="comment-email">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.email_address"),[]))+'<span class="font-color-meta-light">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("blogs.vwpst.rqdNotPblshd.label"),[]))+"</span></label></div></div>":"",'<a class="font-color-meta advEditor" href="javascript:void(0);">',soy.$$escapeHtml(A.i18n.advEditor),'</a><p class="jive-discussion-post"></p></div></div></div></div></li>');return C?"":B.toString()};jive.DiscussionApp.soy.replyErrorMessage=function(A,C){var B=C||new soy.StringBuilder();B.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.key),[])));return C?"":B.toString()};jive.DiscussionApp.soy.rteMsgQuote=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="jive-rendered-content"><blockquote class="jive-quote"><span class="jive-quote-header">');if(A.isAnonymous){B.append(soy.$$escapeHtml(A.i18n.postGuestWroteLabel))}else{jive.i18n.soy({string:A.i18n.postUserWroteLabel,zero:soy.$$escapeHtml(A.userName)},B)}B.append(":</span><br/><br/>",A.msgBody,"</blockquote></div>");return C?"":B.toString()}
;
jive.namespace("SharedViews");jive.SharedViews.RteView=$Class.extend({init:function(a,b){this._preferredMode=window.preferredMode||b.preferredMode||"advanced";this._container=$j(a);this._formActionContainer=(b.formActionContainer)?$j(b.formActionContainer):this._container;this._rteDisabledBrowser=b.rteDisabledBrowser;this._resourceID=b.resourceID;this._resourceType=b.resourceType;this._isAnonymous=b.isAnonymous;this._templateName=b.templateName||"rte-template";this._bodyContent=b.bodyContent;this._settingsID=b.settingsID||"mini";this._i18n=b.i18n;this.images_enabled=b.imagesEnabled;var c=this;$j(document).ready(function(){c._render();if(!c._rteDisabledBrowser){c._createRTE()}c._addListeners()})},remove:function(){if(!this._rteDisabledBrowser){if(this._rte){this._rte.destroy()}window.editor.clear("wysiwygtext");jive.rte.multiRTE=jive.rte.multiRTE.filter(function(a){return a!="wysiwygtext"})}this._container.find("form").remove();$j(window).unbind("unload",this._unloadCallback);this.emit("remove")},val:function(a){if(a){this._rte.setHTML(a);return this}else{return this._getContentBody()}},setPreviewButtonText:function(a){this._container.find("[name=preview]").val(a)},focus:function(){this._rte.tinymceFocus()},_initEditor:function(){this._currentMode="advanced";var a=this;var b=new jive.rte.RTEListener();b.doneTogglingMode=function(){if(a._currentMode=="advanced"){a._currentMode="rawhtml"}else{a._currentMode="advanced"}a._refreshLinks();a.emit("toggle",a._currentMode)};this._rte.addListener(b);if(this._preferredMode=="rawhtml"){this._rte.toggleEditorMode("wysiwygtext")}else{if(tinymce.isIE){this._rte.toggleEditorMode();this._rte.toggleEditorMode()}}},_initRTE:function(){var a=this;if(this._rte.isTextOnly()){$j("#wysiwyg-panel").removeClass("loading");this._preferredMode="rawhtml";this._currentMode="rawhtml";return}this._initEditor();this._refreshLinks();setTimeout(function(){a.focus()},0);this.emit("ready")},_createRTE:function(){var b=this;var a={images_enabled:this.images_enabled||false};this._rte=new jive.rte.RTE(jiveControl,"wysiwygtext",this._settingsID,a);window.editor.put("wysiwygtext",this._rte);jive.rte.multiRTE.push("wysiwygtext");var c=new jive.rte.RTEListener();c.initFinished=function(d){b._initRTE()};this._rte.addListener(c)},_getContentBody:function(){if(!this._rteDisabledBrowser){return this._rte.getHTML()}else{return this._container.find("textarea:visible").val()}},_getValues:function(){return{body:this._getContentBody()}},_postHandler:function(){this.emit("post",this._getValues());return false},_addListeners:function(){var a=this;this._formActionContainer.find("[name=post]").click(function(){return a._postHandler()}).end().find("[name=preview]").click(function(){a.emit("preview",a._getValues());return false}).end().find("[name=cancel]").click(function(){a.emit("cancel",a._getValues());a._unload();return false});this._container.find(".toggle_preferred_mode").click(function(){var b=a._currentMode;WikiTextConverter.setPreferredEditorMode(b,{callback:function(){a._preferredMode=b;window.preferredMode=b;a._refreshLinks()},timeout:DWRTimeout});return false}).end().find(".toggle_html").click(function(){a._rte.toggleEditorMode("wysiwygtext");return false});this._unloadCallback=this._unload.bind(this);$j(window).bind("unload",this._unloadCallback)},_unload:(function(){}),_template:(function(){var b={};return function a(f,e){var c=/^[\w\-]+$/.test(f)?b[f]=b[f]||a(document.getElementById(f).innerHTML):new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+f.replace(/[\r\t\n]/g," ").replace(/(^|%>)(.+?)(<%|$)/,function(g,h,i,j){return h+d(i)+j}).split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');");return e?c(e):c;function d(g){return g.replace("'","&apos;").replace("\\","\\\\")}}})(),_render:function(){this._container.append(this._template(this._templateName,{body:this._bodyContent}))},_refreshLinks:function(){this._container.find(".toggle_html").toggle(this._currentMode=="rawhtml");this._container.find(".toggle_preferred_mode").toggle(this._preferredMode!=this._currentMode)}});jive.SharedViews.RteView.setMiniRTEQuotedMsg=function(c,b,d,a){window._jive_gui_quote_text=jive.DiscussionApp.soy.rteMsgQuote({i18n:b,userName:c,isAnonymous:d,msgBody:a})};jive.conc.observable(jive.SharedViews.RteView.prototype);
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.shared=="undefined"){jive.shared={}}if(typeof jive.shared.formwaiting=="undefined"){jive.shared.formwaiting={}}jive.shared.formwaiting.formWaitingOverlay=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="jive-js-form-disable jive-form-waiting-disable"><div class="',soy.$$escapeHtml(A.bgCssClass),'"></div></div>');return C?"":B.toString()}
;
jive.namespace("shared");jive.shared.FormWaitingView=$Class.extend({init:function(a,b){this._$container=$j(a);b=b||{};if(b.containerPadding){this._containerPadding=b.containerPadding}else{this._containerPadding=this._$container.css("padding-left")==null?0:Number(this._$container.css("padding-left").replace("px",""))}this._buttonSelector=b.buttonSelector||"input[type=button], input[type=submit]";this._bgCssClass=b.bgCssClass||"jive-form-waiting-disable-bg"},disableForm:function(){var e=new jive.loader.LoaderView({size:"big"});if(this._$container.find(".jive-js-form-disable").length==0){var c={width:this._$container.innerWidth(),height:this._$container.innerHeight(),left:0,top:0};var d=$j(jive.shared.formwaiting.formWaitingOverlay({bgCssClass:this._bgCssClass}));for(var b in c){d.css(b,c[b]+"px")}d.prependTo(this._$container);var a=e.getContent();e.appendTo(d);a.css("left",(c.width/2-a.width()/2)+"px");a.css("top",(c.height/2-a.height()/2)+"px");this._$container.find(this._buttonSelector).prop("disabled",true)}},enableForm:function(){this._$container.find(".jive-js-form-disable").remove();this._$container.find(this._buttonSelector).prop("disabled",false)}});
;
jive.RestService=jive.oo.Class.extend(function(a){var b=jQuery;a.resourceType="abstract";a.displayGenericErrorMessages=true;a.putOnUpdate=false;a.init=function(d){var c=this;this.pluralizedResourceType=this.pluralizedResourceType||this.resourceType+"s";var e=jive.rest.url("/"+this.pluralizedResourceType);this.RESOURCE_ENDPOINT=(d&&d.forceSecure)?jive.secure(e):e;this.POST_RESOURCE_ENDPOINT=this.RESOURCE_ENDPOINT;this.defaultParams={}};this.suppressGenericErrorMessages=function(){this.displayGenericErrorMessages=false};a.commonAjaxRequest=function(j,e,d,h){var g=this,i,c,f;e=e.toUpperCase();if(e=="POST"){f={contentType:"application/json; charset=utf-8"};c=this.errorSaving}else{if(e=="GET"){c=this.errorFinding}else{if(e=="PUT"){f={contentType:"application/json; charset=utf-8"};c=this.errorUpdating}else{if(e=="DELETE"){c=this.errorDestroying}}}}b.ajax(b.extend({type:e,dataType:"json",success:i||function(k,m,l){g.normalizeID(k);j.emitSuccess(k)},error:this.errorCallback(j,c),timeout:120000},f||{},d));return j};this.save=function(d){this.normalizeID(d);var c=this.saveUrl(d);var e=this.saveMethod(d);return this.commonAjaxRequest(new jive.conc.Promise(),e,{url:c,data:JSON.stringify(this.withoutId(d))},d)};this.get=function(f,e){var c=this.RESOURCE_ENDPOINT+"/"+f,d=jQuery.extend({},this.defaultParams,e||{});return this.commonAjaxRequest(new jive.conc.Promise(),"GET",{url:c,data:d})};this.findAll=function(e){var c=this.RESOURCE_ENDPOINT,d=b.extend({},this.defaultParams,e);return this.commonAjaxRequest(new jive.conc.Promise(),"GET",{url:c,data:d})};this.destroy=function(e){var d=new jive.conc.Promise(),c=this;if(e.hasOwnProperty("id")){e=e.id}b.ajax({type:"DELETE",url:this.RESOURCE_ENDPOINT+"/"+e,success:function(){d.emitSuccess()},error:function(f){c.maybeEmitError(d,c.errorDestroying,[null,f&&f.status])},timeout:30000});return d};a.normalizeID=function(c){var d=c?(c.id||c[this.resourceType+"ID"]):null;if(c&&d){c.id=d}};a.unwrapResponse=function(c){if(Object.keys(c).length===1){return c[Object.keys(c)[0]]}else{return c}};a.errorCallback=function(e,c){var d=this;return function(k,l,h){var i,g,f;try{i=JSON.parse(k.responseText)}catch(j){}g=i?i.message:null;f=(i&&i.code)?i.code:k.status;if(l!=="error"||k.status>=100){d.maybeEmitError(e,c,[g,f])}}};a.maybeEmitError=function(e,c,d){if(this.displayGenericErrorMessages){this.displayError(c())}e.emitError.apply(e,d)};a.displayError=function(c){b(c).message({style:"error"})};a.errorSaving=function(){return jive.error.rest.soy.errorSaving({href:window.location})};a.errorFinding=function(){return jive.error.rest.soy.errorFinding({href:window.location})};a.errorUpdating=function(){return jive.error.rest.soy.errorUpdating({href:window.location})};a.errorDestroying=function(){return jive.error.rest.soy.errorDestroying({href:window.location})};a.withoutId=function(c){var d={};Object.keys(c).forEach(function(e){if(e!="id"){d[e]=c[e]}});return d};a.saveUrl=function(c){if(c.id){return this.RESOURCE_ENDPOINT+"/"+c.id}else{return this.POST_RESOURCE_ENDPOINT}};a.saveMethod=function(c){if(c.id&&this.putOnUpdate){return"PUT"}else{return"POST"}}});define("jive.RestService",function(){return jive.RestService});
;
jive.NestedRestService=jive.RestService.extend(function(a,b){a.init=function(c){b.init.call(this,c);this.parentType=c.parentType;this.parentID=c.parentID;this.POST_RESOURCE_ENDPOINT=[this.RESOURCE_ENDPOINT,this.parentType,this.parentID].join("/")}});
;
jive.namespace("CommentApp");jive.CommentApp.CommentSource=jive.NestedRestService.extend(function(a,c){a.resourceType="comment";a.init=function(d){this.parentType=d.resourceType;this.parentID=d.resourceID;this.listAction=d.listAction;this.location=d.location;this.commentMode=d.commentMode;this.isPrintPreview=Boolean(d.isPrintPreview);this.contentObject=d.contentObject;c.init.call(this,{parentType:this.parentType,parentID:this.parentID})};var b=1;this.getAllAsHTML=function(e){var d=new jive.conc.Promise();$j.ajax({type:"GET",url:this.listAction,dataType:"html",cache:false,data:$j.extend({location:this.location,mode:this.commentMode,isPrintPreview:this.isPrintPreview},this.contentObject,e),success:function(f){d.emitSuccess(f)},error:function(f){d.emitError(f)}});return d};this.getPreview=function(e){var d=new jive.conc.Promise();$j.ajax({type:"POST",url:this.POST_COMMENT_ENDPOINT+"/preview",dataType:"html",cache:false,data:{commentBody:e.body},success:function(f){d.emitSuccess(f)},error:function(f){d.emitError(f)}});return d}});
;
jive.namespace("CommentApp");jive.CommentApp.Comment=$Class.extend({init:function(b){var a=this;Object.keys(b).forEach(function(c){a[c]=b[c]})}});
;
jive.namespace("CommentApp");jive.CommentApp.CommentListView=jive.AbstractView.extend(function(a){var b=jQuery;jive.conc.observable(this);this.init=function(c,e){var d=this;this.container="#"+c;this.containerID=c;this.isThreaded=e.isThreaded;this.i18n=e.i18n;this.options=e;b(document).ready(function(){b(d.container).delegate("#inline-comment-sort","change",function(){d.emit("sortChange",b(this).val())});d.bindEvents()})};this.getContent=function(){return b(this.container)};this.closeForm=function(){if(this.form){this.form.remove();this.form=null;b(".jive-comment-add-link").show();this.emit("formClosed")}};this.renderForm=function(h,e,g,d){var c=this;this.closeForm();var f=h===jive.CommentApp.EditFormView;if(f){this.hideShowCommentForm(g.getDOMElement(),false)}else{this.hideShowCommentForm(null,false)}b(".jive-comment-add-link").hide();this.form=new h(e,d);e.parent(".jive-rendered-content").removeClass("jive-rendered-content");this.proxyListener(this.form,"post","saveComment",function(i,j){j.addCallback(function(){c.closeForm()}).addErrback(function(l,k){c.displayError(l,k)})});this.proxyListener(this.form,"post","savedComment");this.proxyListener(this.form,"cancel","cancelComment",function(){c.closeForm();c.hideShowCommentForm(null,true)});this.form.addListener("remove",function(){if(f){g.hideCommentEdit()}})};a.renderPostForm=function(f,d){var c;if(!d){d=f;f=null;c=this.newCommentForm()}else{c=this.replyCommentForm(f)}var e=b(c).find(".jive-comment-post");return this.renderForm(jive.CommentApp.FormView,e,f,b.extend({i18n:this.i18n},d))};a.renderEditForm=function(e,c){var d=b(e.getDOMElement());if(!d.is(".jive-comment-edit")){d=d.find(".jive-comment-edit:first")}return this.renderForm(jive.CommentApp.EditFormView,d,e,c)};a.bindEvents=function(){var c=this;function d(j){return b(j).closest(".jive-comment-actions").attr("data-comment-id")}function i(k){var j=b(k).closest("li[id^=comment-]");return(new jive.CommentApp.CommentView(j,b.extend({id:d(k)},c.options)))}function g(j){return b(j).attr("commentusername")}function f(j){return b(j).attr("commentuserid")}function e(n,j,m,k){var l=b(n);if(l.length===0){window._jive_gui_quote_text=""}else{var p=$def(window._jive_current_user)&&(window._jive_current_user.ID==f(n))?window._jive_current_user.username:m;var o=l.attr("data-isAnonymous").toLowerCase()=="true";j.setQuotedMsg(p,o,(k?l.parents("li:first"):null))}}var h=b(this.container);h.delegate(".jive-comment-actions a:has(.commentEdit)","click",function(m){c.hideShowCommentForm(null,true);var l=d(this);var p=b(this).attr("data-parentID");var o={id:l};if(p){b.extend(o,{inReplyTo:{id:p}})}c.emit("editComment",o);var j=i(this),k=b("#comment-"+p).find("a:has(.commentAdd):first"),n=g(k);e(k,j,n,true);j.showCommentEdit();c.renderEditForm(j,b.extend({id:d(this)},c.options));m.preventDefault()});h.delegate(".jive-comment-actions a:has(.commentDelete)","click",function(j){c.emit("deleteComment",i(this),d(this));j.preventDefault()});h.delegate(".jive-comment-actions a:has(.commentAdd)","click",function(l){var k=d(this);var n={id:0,inReplyTo:{id:k}};c.emit("replyComment",n);var m=g(this),j=i(this);e(this,j,m);c.updateBaseCommentUsername(m);c.renderPostForm(j,b.extend({parentCommentID:d(this)},c.options));l.preventDefault()});h.delegate(".js-add-comment","click",function(j){c.emit("createComment",{id:0});window._jive_gui_quote_text="";c.updateBaseCommentUsername("");c.renderPostForm(c.options);b(".jive-create-comment p.jive-comment-meta").hide();j.preventDefault()})};a.scrollToPermalink=function(){var d=(window.location.hash.match(/^#([^\/].+)$/)||[])[1];d=encodeURIComponent(d);var c=d?b(this.container+' a[name="'+d+'"], '+this.container+' [id="'+d+'"]'):b();if(c.length>0){if(!this.getContent().is(":visible")&&window.tabView){window.tabView.setVisibility(this.containerID,true);window.tabView.switchTo(this.containerID)}b.scrollTo(c,200,{offset:{top:-20,left:-200}})}};this.setContent=function(c){var d=b(this.container).html(c);this.scrollToPermalink();jive.rte.renderedContent.emit("renderedContent",d)};this.displayError=function(d,c){if(c==401||c==403||c==4026||c===0){d=jive.i18n.sub(this.i18n.globalLoginRequired,'<a href="'+encodeURI(window.location).replace(/#.*$/,"")+'">',"</a>")}d=d||this.i18n.globalAjaxError;b("#jive-comment-error").html(d).show()};this.displaySuccess=function(c){b("#success-moderation-edit").html('<div><span class="jive-icon-med jive-icon-warn"></span>'+c+"</div>").show();b.scrollTo(b("#success-moderation-edit"),"slow",{offset:{top:-40,left:0}})};this.setPreviewButtonText=function(c){};this.scrollTo=function(d){var c=b(this.container);if(!this.inView(c)){b.scrollTo(b(this.container),d||200,{offset:{top:-30,left:0}})}};a.inView=function(d){var f=b(window).scrollTop(),e=f+b(window).height(),c=b(d).offset().top;return((c>=f)&&(c<=e))};a.hideShowCommentForm=function(c,d){c=c||b(this.container).find(".jive-js-addReply");if(c.length===0){return}if(d){c.fadeOut("fast").remove()}else{c.fadeIn("fast");b.scrollTo(c,"slow",{offset:{top:-100,left:0},axis:"y"})}};a.listElement=function(){var c=b(this.container).find("ul.jive-comment:first");if(c.length===0){c=b("<ul/>",{"class":"jive-comment jive-comment-threaded clearfix jive-comment-indent-0"});b(this.container).find(".jive-comment-container").html(c)}return c};a.append=function(c){this.listElement().append(c)};a.newCommentForm=function(){this.hideShowCommentForm(null,true);var c=b(jive.CommentApp.soy.renderReply({i18n:this.i18n}));this.append(c);return c};a.replyCommentForm=function(f){this.hideShowCommentForm(null,true);var d=b(jive.CommentApp.soy.renderReply({commentID:f.getCommentID(),username:f.username(),i18n:this.i18n}));f.append(d);if(this.isThreaded){var e=f.indent(),c=parseInt(d.parent().css("margin-left"),10);d.css("margin-left",-e-c+"px")}return d};a.getBaseFormElem=function(){return b(this.container).find(".baseCommentForm")};a.updateBaseCommentUsername=function(c){if(!this.isThreaded){this.getBaseFormElem().find(".replyToName").html(c)}};this.beforeListLoad=function(){b(this.container).append('<div class="j-loader-box">'+this.i18n.loading+"</div>")}});
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.content=="undefined"){jive.content={}}jive.content.drafts=function(C,G){var E=G||new soy.StringBuilder();E.append('<div id="autosave-prompt" class="jive-warn-box" role="alert" aria-live="polite" aria-atomic="true" tabindex="0"><p><span class="jive-icon-med jive-icon-warn"></span>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("draft.exists.info"),[])),"</p>");var B=C.drafts;var F=B.length;for(var D=0;D<F;D++){var A=B[D];jive.content.draft(A,E)}E.append("</div>");return G?"":E.toString()};jive.content.draftlastsaved=function(A,C){var B=C||new soy.StringBuilder();B.append('<span class="last-saved">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("draft.saved.last"),[(A.date?dateFormat(parseFloat(A.date),"h:MM TT"):"")])),"</span>");return C?"":B.toString()};jive.content.draft=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="jive-draft" id="draft-',soy.$$escapeHtml(A.id),'"><dl><dt>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("draft.saved.last.short"),[])),"</dt><dd>",soy.$$escapeHtml((A.modificationDate?dateFormat(parseFloat(A.modificationDate),"mmm d, yyyy h:MM TT"):"")),"</dd>",(A.subject)?"<dt>"+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.subject"),[]))+":</dt><dd>"+soy.$$escapeHtml((function(G,D){var F,E;if("string"!==typeof G){return""}F=G.split("");if(F.length>D){for(E=F.length-1;E>-1;--E){if(E>D){F.length=E}else{if(" "===F[E]){F.length=E;break}}}F.push("...")}return F.join("")})(A.subject,70))+"</dd>":"",'</dl><button id="draft-recover-button-',soy.$$escapeHtml(A.id),'" class="jive-description use-draft" aria-labelledby="draft-recover-label-',soy.$$escapeHtml(A.id),'" role="button">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("draft.recover"),[])),"</button>");jive.content.draftRecoverButtonLabel(A,B);B.append('<button id="draft-delete-button-',soy.$$escapeHtml(A.id),'" class="jive-description destroy-draft" aria-labelledby="draft-delete-label-',soy.$$escapeHtml(A.id),'" role="button">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("draft.delete"),[])),"</button>");jive.content.draftDeleteButtonLabel(A,B);B.append("</div>");return C?"":B.toString()};jive.content.draftRecoverButtonLabel=function(A,C){var B=C||new soy.StringBuilder();B.append('<span aria-hidden="true" class="j-508-label" id="draft-recover-label-',soy.$$escapeHtml(A.id),'">');jive.shared.soy.i18nHelper({i18nKey:A.subject?"draft.recover.label.subject":"draft.recover.label.subject.none",arg0:soy.$$escapeHtml((A.modificationDate?dateFormat(parseFloat(A.modificationDate),"mmm d, yyyy h:MM TT"):"")),arg1:soy.$$escapeHtml((function(G,D){var F,E;if("string"!==typeof G){return""}F=G.split("");if(F.length>D){for(E=F.length-1;E>-1;--E){if(E>D){F.length=E}else{if(" "===F[E]){F.length=E;break}}}F.push("...")}return F.join("")})(A.subject,70))},B);B.append("</span>");return C?"":B.toString()};jive.content.draftDeleteButtonLabel=function(A,C){var B=C||new soy.StringBuilder();B.append('<span aria-hidden="true" class="j-508-label" id="draft-delete-label-',soy.$$escapeHtml(A.id),'">');jive.shared.soy.i18nHelper({i18nKey:A.subject?"draft.delete.label.subject":"draft.delete.label.subject.none",arg0:soy.$$escapeHtml((A.modificationDate?dateFormat(parseFloat(A.modificationDate),"mmm d, yyyy h:MM TT"):"")),arg1:soy.$$escapeHtml((function(G,D){var F,E;if("string"!==typeof G){return""}F=G.split("");if(F.length>D){for(E=F.length-1;E>-1;--E){if(E>D){F.length=E}else{if(" "===F[E]){F.length=E;break}}}F.push("...")}return F.join("")})(A.subject,70))},B);B.append("</span>");return C?"":B.toString()}
;
var form2js=(function(){function e(m,l,n,k,p){if(typeof n=="undefined"||n==null){n=true}if(typeof l=="undefined"||l==null){l="."}if(arguments.length<5){p=false}m=typeof m=="string"?document.getElementById(m):m;var q=[],j,o=0;if(m.constructor==Array||(typeof NodeList!="undefined"&&m.constructor==NodeList)){while(j=m[o++]){q=q.concat(d(j,k,p))}}else{q=d(m,k,p)}return b(q,n,l)}function b(s,A,C){var p={},q={},y,x,w,v,u,r,n,t,o,m,z,D,B;for(y=0;y<s.length;y++){u=s[y].value;if(A&&(u===""||u===null)){continue}D=s[y].name;B=D.split(C);r=[];n=p;t="";for(x=0;x<B.length;x++){z=B[x].split("][");if(z.length>1){for(w=0;w<z.length;w++){if(w==0){z[w]=z[w]+"]"}else{if(w==z.length-1){z[w]="["+z[w]}else{z[w]="["+z[w]+"]"}}m=z[w].match(/([a-z_]+)?\[([a-z_][a-z0-9_]+?)\]/i);if(m){for(v=1;v<m.length;v++){if(m[v]){r.push(m[v])}}}else{r.push(z[w])}}}else{r=r.concat(z)}}for(x=0;x<r.length;x++){z=r[x];if(z.indexOf("[]")>-1&&x==r.length-1){o=z.substr(0,z.indexOf("["));t+=o;if(!n[o]){n[o]=[]}n[o].push(u)}else{if(z.indexOf("[")>-1){o=z.substr(0,z.indexOf("["));m=z.replace(/(^([a-z_]+)?\[)|(\]$)/gi,"");t+="_"+o+"_"+m;if(!q[t]){q[t]={}}if(o!=""&&!n[o]){n[o]=[]}if(x==r.length-1){if(o==""){n.push(u);q[t][m]=n[n.length-1]}else{n[o].push(u);q[t][m]=n[o][n[o].length-1]}}else{if(!q[t][m]){if((/^[a-z_]+\[?/i).test(r[x+1])){n[o].push({})}else{n[o].push([])}q[t][m]=n[o][n[o].length-1]}}n=q[t][m]}else{t+=z;if(x<r.length-1){if(!n[z]){n[z]={}}n=n[z]}else{n[z]=u}}}}}return p}function d(k,j,l){var i=a(k,j,l);return i.length>0?i:g(k,j,l)}function g(k,j,m){var i=[],l=k.firstChild;while(l){i=i.concat(a(l,j,m));l=l.nextSibling}return i}function a(l,j,n){var k,m,i,o=f(l,n);k=j&&j(l);if(k&&k.name){i=[k]}else{if(o!=""&&l.nodeName.match(/INPUT|TEXTAREA/i)){m=c(l);i=[{name:o,value:m}]}else{if(o!=""&&l.nodeName.match(/SELECT/i)){m=c(l);i=[{name:o.replace(/\[\]$/,""),value:m}]}else{i=g(l,j,n)}}}return i}function f(i,j){if(i.name&&i.name!=""){return i.name}else{if(j&&i.id&&i.id!=""){return i.id}else{return""}}}function c(i){if(i.disabled){return null}switch(i.nodeName){case"INPUT":case"TEXTAREA":switch(i.type.toLowerCase()){case"radio":case"checkbox":if(i.checked&&i.value==="true"){return true}if(!i.checked&&i.value==="true"){return false}if(i.checked){return i.value}break;case"button":case"reset":case"submit":case"image":return"";break;default:return i.value;break}break;case"SELECT":return h(i);break;default:break}return null}function h(o){var k=o.multiple,j=[],n,p,m;if(!k){return o.value}for(n=o.getElementsByTagName("option"),p=0,m=n.length;p<m;p++){if(n[p].selected){j.push(n[p].value)}}return j}return e})();var js2form=(function(){var f=/^\[\d+?\]/,j=/^[a-zA-Z_][a-zA-Z_0-9]+/,l=/\[[0-9]+?\]$/,g=/(.*)(\[)([0-9]*)(\])$/,k=/\[([0-9]+)\]\[([0-9]+)\]/g,d=/INPUT|TEXTAREA/i;function h(q,s,m,u,p){if(arguments.length<3){m="."}if(arguments.length<4){u=null}if(arguments.length<5){p=false}var o,r;o=i(s);r=a(q,p,m,{},false);for(var t=0;t<o.length;t++){var v=o[t].name,n=o[t].value;if(typeof r[v]!="undefined"){b(r[v],n)}else{if(typeof r[v.replace(l,"[]")]!="undefined"){b(r[v.replace(l,"[]")],n)}}}}function b(q,p){var o,n,m;if(q instanceof Array){for(n=0;n<q.length;n++){if(q[n].value==p){if(q[n].checked!=true){$j(q[n]).click()}}}}else{if(d.test(q.nodeName)){$j(q).val(p)}else{if(/SELECT/i.test(q.nodeName)){o=q.getElementsByTagName("option");for(n=0,m=o.length;n<m;n++){if(o[n].value==p){o[n].selected=true;if(q.multiple){break}}else{if(!q.multiple){o[n].selected=false}}}}}}}function a(q,p,n,v,r){if(arguments.length<4){v={}}var A={},w=q.firstChild,m,o,y,u,t,s,z;while(w){m="";if(w.name&&w.name!=""){m=w.name}else{if(p&&w.id&&w.id!=""){m=w.id}}if(m==""){var x=a(w,p,n,v,r);for(y in x){if(typeof A[y]=="undefined"){A[y]=x[y]}else{for(u=0;u<x[y].length;u++){A[y].push(x[y][u])}}}}else{if(/SELECT/i.test(w.nodeName)){for(t=0,z=w.getElementsByTagName("option"),s=z.length;t<s;t++){if(r){z[t].selected=false}o=e(m,n,v);A[o]=w}}else{if(/INPUT/i.test(w.nodeName)&&/CHECKBOX|RADIO/i.test(w.type)){if(r){w.checked=false}o=e(m,n,v);o=o.replace(l,"[]");if(!A[o]){A[o]=[]}A[o].push(w)}else{if(r){w.value=""}o=e(m,n,v);A[o]=w}}}w=w.nextSibling}return A}function e(o,p,u){var v=[],n=o.split(p),s,r,q,m,w,t;o=o.replace(k,"[$1].[$2]");for(t=0;t<n.length;t++){s=n[t];v.push(s);r=s.match(g);if(r!=null){q=v.join(p);m=q.replace(g,"$3");q=q.replace(g,"$1");if(typeof(u[q])=="undefined"){u[q]={lastIndex:-1,indexes:{}}}if(m==""||typeof u[q].indexes[m]=="undefined"){u[q].lastIndex++;u[q].indexes[m]=u[q].lastIndex}w=u[q].indexes[m];v[v.length-1]=s.replace(g,"$1$2"+w+"$4")}}q=v.join(p);q=q.replace("].[","][");return q}function i(q,o){var m=[],p,n;if(arguments.length==1){o=0}if(q==null){m=[{name:"",value:null}]}else{if(typeof q=="string"||typeof q=="number"||typeof q=="date"||typeof q=="boolean"){m=[{name:"",value:q}]}else{if(q instanceof Array){for(p=0;p<q.length;p++){n="["+p+"]";m=m.concat(c(q[p],n,o+1))}}else{for(p in q){n=p;m=m.concat(c(q[p],n,o+1))}}}}return m}function c(n,q,p){var t;var m=[],o=i(n,p+1),r,s;for(r=0;r<o.length;r++){t=q;if(f.test(o[r].name)){t+=o[r].name}else{if(j.test(o[r].name)){t+="."+o[r].name}}s={name:t,value:o[r].value};m.push(s)}return m}return h})();(function(a){a.fn.toObject=function(c){var b=[],d={mode:"first",delimiter:".",skipEmpty:true,nodeCallback:null,useIdIfEmptyName:false};if(c){a.extend(d,c)}switch(d.mode){case"first":return form2js(this.get(0),d.delimiter,d.skipEmpty,d.nodeCallback,d.useIdIfEmptyName);break;case"all":this.each(function(){b.push(form2js(this,d.delimiter,d.skipEmpty,d.nodeCallback,d.useIdIfEmptyName))});return b;break;case"combine":return form2js(Array.prototype.slice.call(this),d.delimiter,d.skipEmpty,d.nodeCallback,d.useIdIfEmptyName);break}}})(jQuery);
;
jive.namespace("draft");jive.draft.View=jive.AbstractView.extend(function(b,c){var d=jQuery,a,e;this.init=function(f){c.init.call(this,f);this.options=d.extend({pushStateEnabled:true},f);a=this;a.locationState=new jive.LocationState();d(function(){var h=a.getContent();var g=a.serializeForm();h.data("autosave",g);a.emit("display");d("#autosave-prompt .use-draft").live("click",function(k){var j=d(k.target).closest(".jive-draft");var i=j.data("draft");a.emit("restore",i);jive.switchboard.emit("draft.destroy",i.id)});d("#autosave-prompt .destroy-draft").live("click",function(k){var j=d(k.target).closest(".jive-draft");var i=j.data("draft");a.emit("destroy",i.id);jive.switchboard.emit("draft.destroy",i.id)});a.unpause();window.setInterval(function(){a.emit("keepalive")},f.keepaliveInterval*1000);d(window).unload(function(){a.removeFromWorkingDrafts(h.data("autosave").id)});jive.switchboard.addListener("draft.destroy",function(i){a.destroy(i)})})};this.pause=function(){if(e){clearTimeout(e);e=null}};this.unpause=function(){if(!e){e=setTimeout(a.save,a.options.interval*1000)}};this.save=function(){var i=new Date().getTime();function h(){var l=(new Date().getTime()-i);e=setTimeout(a.save,Math.min(Math.max(l*20,a.options.interval*1000),a.options.interval*50000))}var f=a.serializeForm();if(f.body.length===0){h();return}var j=a.getContent();var g=j.data("autosave");var k=f.body!=g.body||f.subject!=g.subject||JSON.stringify(f.properties)!=JSON.stringify(g.properties);if(!k){h();return}if(g.id){f.id=g.id;a.emitP("save",f).always(h)}else{a.emitP("create",f).always(h)}};b.serializeForm=function(){var f={};var g=a.getContent().toObject({mode:"all"})[0];f.objectType=a.options.objectType;f.draftObjectType=a.options.draftObjectType;f.draftObjectID=a.options.draftObjectID;f.subject=d("#"+a.options.subject).val();f.body=a.getRTE()?a.getRTE().getHTML():"";f.properties={};d.each(a.options.properties,function(j,h){f.properties[h]=g[h]});return f};b.getRTE=function(){return window.editor.get(a.options.editorId)};this.saved=function(h,l){try{var k=a.getContent();k.data("autosave",h);a.addToWorkingDrafts(h.id);if(a.options.pushStateEnabled){a.updatePushState(h.id)}a.updateFormDraftID(k,h.id);var j=d(jive.content.draftlastsaved({date:new Date()}));var g=d(a.getRTE().getBelowEditorArea());var f=g.find(".last-saved");if(f.length){f.replaceWith(j)}else{j.hide().appendTo(g).fadeIn();a.getRTE().autoReposition()}l.emitSuccess(h)}catch(i){if(l){l.emitError(i)}}};this.display=function(k){var g=a.locationState.getState().draftID;if(g){var j=false;d.each(k,function(m,l){if(l.id==g){a.emit("restore",l);j=true}});if(j){return}}var h=[];d.each(k,function(m,l){if(!a.isWorkingDraft(l.id)){h.push(l)}});if(h.length===0){return}var i=a.getContent();var f=d(jive.content.drafts({drafts:h}));f.find(".jive-draft").each(function(l){d(this).data("draft",h[l])});f.hide().insertBefore(i).fadeIn();f.focus()};this.restore=function(g){var f=a.getContent();js2form(f[0],g.properties);a.getRTE().setHTML(g.body);d("#"+a.options.subject).val(g.subject);f.trigger("restore",g);a.addToWorkingDrafts(g.id);a.updateFormDraftID(f,g.id);f.data("autosave",g);d("#autosave-prompt").fadeOut(function(){d(this).safeRemove()});if(a.options.pushStateEnabled){a.updatePushState(g.id)}};this.destroy=function(j){var f=d("#autosave-prompt");if(f.length===0){return}var h=d("#draft-"+j);if(h.length===0){return}var i=f.find(".jive-draft").length>1;var g=i?h:f;g.fadeOut(function(){d(this).safeRemove()})};b.updateFormDraftID=function(g,h){var f=g.find("input#draftID");if(f.length===0){f=d("<input />",{id:"draftID",name:"draftID",type:"hidden"});f.appendTo(g)}f.val(h)};b.updatePushState=function(f){a.locationState.pushState({draftID:f})};b.addToWorkingDrafts=function(g){var f=a.getWorkingDrafts();if(!a.isWorkingDraft(g)){f.push(g)}if(a.isLocalStorageAvailable()){localStorage.setItem("workingDrafts",f)}};b.removeFromWorkingDrafts=function(g){var f=a.getWorkingDrafts();f.splice(f.indexOf(String(g)),1);if(a.isLocalStorageAvailable()){localStorage.setItem("workingDrafts",f)}};b.isWorkingDraft=function(f){return d.inArray(String(f),a.getWorkingDrafts())>-1};b.getWorkingDrafts=function(){if(!a.isLocalStorageAvailable()){return[]}var f=localStorage.getItem("workingDrafts");return f?f.split(","):[]};b.isLocalStorageAvailable=function(){return typeof localStorage==="object"&&localStorage&&localStorage.getItem&&localStorage.setItem}});
;
jive.namespace("draft");jive.draft.Model=jive.RestService.extend(function(a){a.resourceType="draft";a.pluralizedResourceType=a.resourceType;this.save=function(b){return this.commonAjaxRequest(new jive.conc.Promise(),"PUT",{url:this.RESOURCE_ENDPOINT+"/"+b.id,contentType:"application/json; charset=utf-8",data:JSON.stringify(b)})};this.create=function(b){return this.commonAjaxRequest(new jive.conc.Promise(),"POST",{url:this.RESOURCE_ENDPOINT,contentType:"application/json; charset=utf-8",data:JSON.stringify(b)})};this.display=function(b){return this.get(b)}});
;
jive.namespace("draft");jive.draft.Main=jive.oo.Class.extend(function(a){this.init=function(b){a.main=this;this.options=$j.extend({enabled:true,interval:10,keepaliveInterval:90,objectType:null,draftObjectType:null,draftObjectID:null,editorId:null,subject:null,images:[],properties:[],confirmationMessage:jive.i18n.getMsg("global.unsaved_changes.text"),saveMessage:jive.i18n.getMsg("forum.post.save_and_edit.text"),savedMessage:jive.i18n.getMsg("forum.post.save_and_edit.text")},b);b=this.options;this.view=new jive.draft.View(b);this.model=new jive.draft.Model(b);this.view.addListener("keepalive",function(c){a.main.model.get("")});this.view.addListener("display",function(c){var d=b.objectType+"/"+b.draftObjectType+"/"+b.draftObjectID;a.main.model.display(d).addCallback(function(e){a.main.view.display(e)})});this.view.addListener("create",function(c,d){a.main.model.create(c).addCallback(function(e){a.main.view.saved(e,d)}).addErrback(function(){d.emitError()})});this.view.addListener("save",function(c,d){a.main.model.save(c).addCallback(function(e){a.main.view.saved(e,d)}).addErrback(function(){d.emitError()})});this.view.addListener("restore",function(c){a.main.view.restore(c)});this.view.addListener("destroy",function(c){a.main.model.destroy(c).addCallback(function(d){a.main.view.destroy(c)})})};this.pause=function(){a.main.view.pause()};this.unpause=function(){a.main.view.unpause()}});
;
jive.namespace("CommentApp");jive.CommentApp.FormView=jive.oo.Class.extend(function(a,b){jive.conc.observable(this);this.init=function(c,d){this._parentCommentID=d.parentCommentID;this._commentMode=d.commentMode;if(!this._postBlock){this._postBlock=$j("#jive-comment-post-block")}this._itemAuthorID="comment-author";this._itemBodyID="commentBody";this._itemEmailID="comment-email";this._itemURLID="comment-url";this._container=$j(c);this._initFormWaitingView(d.i18n);this.rteView=null;this.options=d;this._render()};this.getParentCommentID=function(){return this._parentCommentID};a._initFormWaitingView=function(c){this._formWaitingView=new jive.shared.FormWaitingView(this._container.parents(".jive-js-addReply"),{containerPadding:0})};a.focus=function(){if(this._isAnonymous){$j("#"+this._itemAuthorID).focus()}else{b.focus.call(this)}};a._getValues=function(){return{body:this.rteView.getHTML(),mobileEditor:this.rteView.isMobileOnly(),name:$j("#"+this._itemAuthorID).val(),email:$j("#"+this._itemEmailID).val(),url:$j("#"+this._itemURLID).val(),parentCommentID:this._parentCommentID,commentMode:this._commentMode}};a._postHandler=function(){var c=this;if(c._validateComment()){c._formWaitingView.disableForm();c.emitP("post",c._getValues()).addCallback(function(){c._formWaitingView.enableForm()}).addErrback(function(){c._formWaitingView.enableForm()})}return false};a._validateComment=function(){var c=this._getValues();if(this.options.isAnonymous&&$def(c.name)&&$j.trim(c.name)===""){$j("<p/>",{text:jive.DiscussionApp.soy.replyErrorMessage({key:"forum.thrd.name_required.text"})}).message({style:"error"});return false}else{if(this.options.isAnonymous&&$def(c.email)&&$j.trim(c.email)===""){$j("<p/>",{text:jive.DiscussionApp.soy.replyErrorMessage({key:"forum.thrd.email_required.text"})}).message({style:"error"});return false}else{if($j.trim(c.body)===""){$j("<p/>",{text:jive.DiscussionApp.soy.replyErrorMessage({key:"post.err.pls_enter_body.text"})}).message({style:"error"});return false}else{return true}}}};a._initFormControls=function(d,c){};a._isEdit=function(){return false};a._render=function(){var e=this._template();var j="wysiwyg_id_"+jive.CommentApp.FormView.id;jive.CommentApp.FormView.id++;e.find("textarea").attr("id",j);this._container.append(e);this._initFormControls(this._container,j);var h=this;var c=new jive.rte.EntitlementService({objectID:h.options.resourceID,objectType:h.options.resourceType,entitlement:"VIEW"});var g=new jive.rte.ImageService({objectId:-1,objectType:-1,containerId:h.options.containerID,containerType:h.options.containerType});var f=$j("#"+j).closest("form");var d=new jive.rte.FormService({$form:f,formSubmitHandler:function(){return h._postHandler()}});var i=$j.extend({$element:$j("#"+j),isEditing:this._isEdit,onReady:function(){if(h.options.rteOptions.onReady){h.options.rteOptions.onReady()}jive.conc.nextTick(function(){h.rteView.focus()});if(!h.options.isAnonymous){var k={selector:f,objectType:105,draftObjectType:h.options.resourceType,draftObjectID:h.options.resourceID,editorId:j,pushStateEnabled:false};new jive.draft.Main(k)}},services:{imageService:g,formService:d,entitlementService:c}},this.options.rteOptions);this.rteView=new jive.rte.RTEWrap(i);this._container.find("form").find("[name=cancel]").click(function(){h.emit("cancel",h._getValues());return false})};a._template=function(){return $j("<div></div>").html(this._postBlock.html())};this.remove=function(){var c=this.rteView.getID();if(this.rteView){this.rteView.killYourself();this.rteView.destroy()}window.editor.clear(c);jive.rte.multiRTE=jive.rte.multiRTE.filter(function(d){return d!=c});this._container.find("form").parent().html("");$j(window).unbind("unload",this._unloadCallback);this.emit("remove")}});jive.CommentApp.FormView.id=0;
;
jive.namespace("CommentApp");jive.CommentApp.EditFormView=jive.CommentApp.FormView.extend(function(a,b){this.init=function(c,d){this._id=d.id;this._postBlock=$j("#jive-comment-edit-block");b.init.call(this,c,d)};a._initFormWaitingView=function(c){this._formWaitingView=new jive.shared.FormWaitingView($j(this._container).parents(".jive-comment-content"),{containerPadding:0})};a._initFormControls=function(h,g){var d=h.find(".jive-comment-rte-source").val();var c=h.find("[name=commentGuestName]").val();var f=h.find("[name=commentGuestEmail]").val();var e=h.find("[name=commentGuestUrl]").val();if(c||f||e){h.find(".jive-comment-rte-source").val();h.find(".jive-comment-post-anonymous [name=name]").val(c);h.find(".jive-comment-post-anonymous [name=email]").val(f);h.find(".jive-comment-post-anonymous [name=url]").val(e);h.find(".jive-comment-post-anonymous").show()}else{h.find(".jive-comment-post-anonymous").hide()}$j("#"+g).val(d)};a._isEdit=function(){return true};a._getValues=function(){return{body:this.rteView.getHTML(),mobileEditor:this.rteView.isMobileOnly(),name:this._container.find("[name=name]").val(),email:this._container.find("[name=email]").val(),url:this._container.find("[name=url]").val(),id:this._id}}});
;
jive.namespace("CommentApp");jive.CommentApp.CommentView=function(l,q){jive.conc.observable(this);var n=q.id,i=$j(l),e=q.isThreaded,p=q.i18n,h=this;function f(){i.fadeOut(function(){$j(this).remove()});this.emit("remove",n);return this}function o(r){i.find("[class*=comment-preview]").html(r).fadeIn()}function m(){return i}function c(s,t,u){if(!u){u=i}var r=u.find(".jive-rendered-content").html();jive.SharedViews.RteView.setMiniRTEQuotedMsg(s,p,t,r)}function j(){i.find(".jive-comment-meta:first, #comment-body-"+n+", #comment-action-div-"+n).hide();i.find(".jive-comment-meta:first").after('<p class="jive-js-edit-title jive-comment-meta font-color-meta-light">'+p.cmntEditingTitle+"</p>")}function k(){i.find(".jive-comment-meta:first, #comment-body-"+n+", #comment-action-div-"+n).show();i.find(".jive-js-edit-title").remove()}function g(){return n}function d(){return i.find(".jive-username-link:first").text()}function a(r){var s;if(e){s=i.find("ul.jive-comment:first");if(s.length===0){s=$j("<ul/>",{"class":"jive-comment clearfix jive-comment-threaded jive-comment-indent-1"});i.append(s)}s.append(r)}else{i.parent().append(r)}}function b(){var r=i.parents().andSelf().filter("ul.jive-comment").toArray();return r.slice(1).reduce(function(t,s){return t+parseInt($j(s).css("margin-left"),10)},0)}this.remove=f;this.displayPreview=o;this.getDOMElement=m;this.setQuotedMsg=c;this.getCommentID=g;this.username=d;this.showCommentEdit=j;this.hideCommentEdit=k;this.append=a;this.indent=b};
;
jive.namespace("CommentApp");jive.CommentApp.Main=jive.Paginated.extend(function(a){this.init=function(c){var b=this;this.commentMode=c.commentMode;this.defaultSort=c.sort||"datedesc";this.paginate=c.paginate||false;this.pageSize=c.pageSize||25;this.i18n=c.i18n;switch(this.commentMode){case"inline":this.containerID="jive-inlinecomments";break;case"backchannel":this.containerID="jive-authordiscussion";break;default:this.containerID="jive-comments";break}this.commentSource=new jive.CommentApp.CommentSource($j.extend({location:this.containerID},c));this.commentListView=new jive.CommentApp.CommentListView(this.containerID,c);this.commentListView.addListener("sortChange",function(d){b.defaultSort=d;b.update({sort:d})}).addListener("saveComment",function(e,f){var g=new jive.CommentApp.Comment(e),d=this;b.commentSource.save(g).addCallback(function(k){var h="comment-"+k.id;var i=window.location.href.split("#")[0]+"#"+h;f.emitSuccess();if(k.moderated){b.loadComments(null,function(){d.displaySuccess(b.i18n.postSuccessText)})}else{if(window.location.href!=i){var j={};j[h]="";b.locationState.setState(j,"saved comment "+k.id)}else{b.update()}}}).addErrback(function(i,h){f.emitError(i,h)})}).addListener("deleteComment",function(f,e){var d=confirm(b.i18n.confirmDeleteComment),g=new jive.CommentApp.Comment({id:e});if(d){f.remove();b.commentSource.destroy(g.id).addCallback(function(){b.update({comment:[]})})}});$j(document).ready(function(){var d;if(b.paginate){b.pager=b.newPager()}if(!b.paginate||Object.keys(jive.locationState.getEphemeralState()).length<1){b.update()}define(["jive.rte"],$j.noop)})};this.closeForms=function(){this.commentListView.closeForm()};this.renderForm=function(b,d,c){this.commentListView.renderForm(b,d,null,c)};this.addCommentListViewListener=function(b,c){this.commentListView.addListener(b,c)};this.refresh=function(){this.update()};a.newPager=function(){var c;var d={replaceWith:function(){}};jive.conc.observable(d);var b=this;this.initPagination({numResults:this.pageSize,sort:this.defaultSort},{locationState:new jive.LocationState({supportPushState:false}),viewClass:function(){return d},paginationSelector:"body",paramFilter:function(f){var e={};Object.keys(f).forEach(function(g){var h=g.match(/^comment-(.*)$/);if(h){e.comment=h[1];e[g]=c}else{e[g]=f[g]}});return e}});$j("#"+this.containerID).delegate(".js-pagination a[data-page]","click",function(e){var f=parseInt($j(this).attr("data-page"),10);d.emit("page",f);b.commentListView.scrollTo();e.preventDefault()});return this};a.loadPage=function(c){var b=new jive.conc.Promise();this.loadComments(c,function(){b.emitSuccess()});return b};a.update=function(b){if(this.paginate&&b){this.pager.pushState(b)}else{this.loadComments(this.pager?this.pager.getState():b)}};a.loadComments=function(c,d){var b=this;c=c||{};c.sort=c.sort||this.defaultSort;if(!this.paginate){this.commentListView.beforeListLoad()}this.commentListView.showSpinner({context:$j("#"+this.containerID+" .jive-comment-container"),size:"big"});this.commentSource.getAllAsHTML(c).addCallback(function(e){b.commentListView.setContent(e);if($j.isFunction(d)){d(e,"success")}}).always(function(){b.commentListView.hideSpinner()})}});
;
jive.action=(function(){var a=_jive_base_url+"/";return{url:function(b,c){var d="";Object.keys(c).forEach(function(e){d+=e+"="+c[e]+"&"});if(d.length>0){d="?"+d.slice(0,d.length-1)}return a+b+".jspa"+d}}})();
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.CommentApp=="undefined"){jive.CommentApp={}}if(typeof jive.CommentApp.soy=="undefined"){jive.CommentApp.soy={}}jive.CommentApp.soy.renderReply=function(A,C){var B=C||new soy.StringBuilder();B.append('<li class="addReply jive-js-addReply" style="display:none;',(A.indent)?" margin-left:"+soy.$$escapeHtml(A.indent):"",'">');jive.shared.displayutil.avatar({anonymous:_jive_current_user.anonymous,enabled:_jive_current_user.enabled,partner:_jive_current_user.partner,username:_jive_current_user.username,id:_jive_current_user.id,ID:_jive_current_user.ID,displayName:_jive_current_user.displayName,visible:true,prop:_jive_current_user.prop,avatarID:_jive_current_user.avatarID,currentUserPartner:_jive_current_user.partner,size:32},B);B.append('<div class="jive-comment-arrow"></div><div class="jive-comment-content jive-create-comment"><p class="jive-comment-meta font-color-meta-light"><strong style="" class="font-color-meta replyTo">');jive.shared.soy.i18nHelper({i18nKey:A.i18n.replyToTitle,arg0:'<span class="replyToName">'+soy.$$escapeHtml(A.username)+"</span>",noAutoEscape:true},B);B.append('<img src="');jive.resource.url({path:"/images/inline-reply-arrow.png"},B);B.append('"/></strong></p>',(A.externallyVisible=="true")?"":"","<div ",(A.commentID)?'id="comment-body-'+soy.$$escapeHtml(A.commentID)+'"':"",' class="jive-comment-body"><div class="jive-rendered-content"><p><div ',(A.commentID)?'id="jive-content-post-'+soy.$$escapeHtml(A.commentID)+'"':"",' class="jive-comment-post"></div></p></div></div></div></li>');return C?"":B.toString()}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.browse=="undefined"){jive.browse={}}if(typeof jive.browse.activityinfo=="undefined"){jive.browse.activityinfo={}}jive.browse.activityinfo.userListHover=function(A,C){var B=C||new soy.StringBuilder();B.append("<header><h2>",(A.activityType=="reply")?(A.totalCount==1)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.replycount.singular"),[A.totalCount])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.replycount.plural"),[A.totalCount])):(A.activityType=="like")?(A.totalCount==1)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.likecount.singular"),[A.totalCount])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.likecount.plural"),[A.totalCount])):(A.activityType=="bookmark")?(A.totalCount==1)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.bookmarkcount.singular"),[A.totalCount])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.bookmarkcount.plural"),[A.totalCount])):(A.activityType=="follow")?(A.totalCount==1)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.followercount.singular"),[A.totalCount])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.followercount.plural"),[A.totalCount])):(A.activityType=="membership")?(A.totalCount==1)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.membercount.singular"),[A.totalCount])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.membercount.plural"),[A.totalCount])):(A.activityType=="connections")?(A.bidirectionalGraph)?(A.totalCount==1)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.friendcount.singular"),[A.totalCount])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.friendcount.plural"),[A.totalCount])):(A.totalCount==1)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.followingcount.singular"),[A.totalCount])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.followingcount.plural"),[A.totalCount])):"",'</h2></header><a href="#" class="j-modal-close-top close">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.close"),[])),'  <span class="j-close-icon j-ui-elem" role="img"></span></a><section class="jive-modal-content"><table><tbody>');jive.browse.activityinfo.userListHoverTableBody(A,B);B.append("</tbody></table></section>");return C?"":B.toString()};jive.browse.activityinfo.userListHoverTableBody=function(C,G){var E=G||new soy.StringBuilder();var B=C.items;var D=B.length;if(D>0){for(var F=0;F<D;F++){var A=B[F];jive.browse.activityinfo.userListHoverItem({currentUserID:C.currentUserID,user:A},E)}}else{E.append(soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("browse.info.user.list.empty"),[])))}return G?"":E.toString()};jive.browse.activityinfo.userListHoverItem=function(A,C){var B=C||new soy.StringBuilder();B.append('<tr><td class="j-td-avatar">');jive.shared.displayutil.avatar(soy.$$augmentData(A.user,{size:35}),B);B.append('</td><td class="j-td-name"><a href="',soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,"/people/"+encodeURIComponent(A.user.username))),'">',(A.currentUserID==A.user.id)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.you"),[])):soy.$$escapeHtml(A.user.displayName),'</a></td><td class="j-td-follow">');if(A.user.prop.connections&&A.user.prop.connections.followLinkShown){jive.people.profile.followLink(soy.$$augmentData(A.user.prop.connections,{targetUserID:A.user.id,targetUserDisplayName:A.user.displayName,hideFollowingCount:true,renderLocation:"user-list",streamsAssociatedCount:A.user.prop.connections.streamsAssociatedBean?A.user.prop.connections.streamsAssociatedBean.streamIDs.length:0}),B)}B.append("</td></tr>");return C?"":B.toString()};jive.browse.activityinfo.userListHoverBox=function(A,C){var B=C||new soy.StringBuilder();B.append('<div id="jive-activity-info-hover" class="jive-modal j-people-list-modal"></div>');return C?"":B.toString()}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.soy=="undefined"){jive.soy={}}if(typeof jive.soy.acclaim=="undefined"){jive.soy.acclaim={}}jive.soy.acclaim.renderAcclaimModal=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="jive-modal j-modal j-acclaim-mini-modal j-people-list-modal" data-you-id="',soy.$$escapeHtml(A.youID),'" role="dialog" tabindex="-1" aria-labelledby="acclaim-header"><header role="header" id="acclaim-header"><h2 ',(A.activityType=="bookmark")?'class="j-modal-bookmark-header"':"",">",(A.activityType=="like")?'<span class="jive-icon-med jive-icon-like"></span>':"",(A.activityType=="bookmark")?'<div class="jive-bookmark-ribbon j-ui-elem"></div>':"");jive.shared.soy.getCountTextByType({count:A.totalCount,type:A.activityType,bidirectionalGraph:A.bidirectionalGraph},B);B.append('</h2></header><label class="j-508-label" id="close-modal-508">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.close.modal"),[])),'</label><a href="#" class="j-modal-close-top close" aria-labelledby="close-modal-508" title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.close.modal"),[])),'">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.close"),[])),' <span class="j-close-icon j-ui-elem" role="img"></span></a><section  class="jive-modal-content clearfix">',(!A.guest)?'<nav id="jive-view-picker" class="j-modal-filter"><input type="checkbox" value="1" id="js-friends" name="user-filter"/><label for="js-friends">'+((A.bidirectionalGraph)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("profile.friends.filter.label"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("profile.connections.filter.label"),[])))+"</label>"+((A.activityType=="bookmark")?'<br/><input type="checkbox" value="2" id="js-only-notes" name="user-filter"/><label for="js-only-notes">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("bookmarks.sidebar.filter.notes"),[]))+"</label>":"")+"</nav>":"");jive.soy.acclaim.renderUserList({activityType:A.activityType,users:A.users,currentUserID:A.youID,currentUserPartner:A.youPartner,onlyFriends:false,id:"modal-liked-everyone",classNames:"liked-everyone-list js-everyone-list",show:true},B);jive.soy.acclaim.renderUserList({activityType:A.activityType,users:A.users,currentUserID:A.youID,currentUserPartner:A.youPartner,onlyFriends:true,id:"modal-liked-friends",classNames:"liked-friends-list js-friends-list",show:false},B);if(A.activityType=="bookmark"){jive.soy.acclaim.renderUserNotesList({activityType:A.activityType,users:A.users,currentUserID:A.youID,currentUserPartner:A.youPartner,onlyFriends:false,onlyNotes:true,id:"modal-bookmark-notes",classNames:"j-user-bookmark-notes-list j-js-user-bookmark-notes-list",show:false},B);jive.soy.acclaim.renderUserNotesList({activityType:A.activityType,users:A.users,currentUserID:A.youID,currentUserPartner:A.youPartner,onlyFriends:true,onlyNotes:true,id:"modal-bookmark-friends-notes",classNames:"j-user-bookmark-notes-list j-js-user-bookmark-friends-notes-list",show:false},B)}B.append("</section></div>");return C?"":B.toString()};jive.soy.acclaim.renderUserList=function(A,G){var C=G||new soy.StringBuilder();C.append('<table id="',soy.$$escapeHtml(A.id),'" class="',soy.$$escapeHtml(A.classNames),'"',(!A.show)?' style="display: none;"':"","><tbody>");var F=A.users;var B=F.length;if(B>0){for(var D=0;D<B;D++){var E=F[D];jive.soy.acclaim.displayUserRow({activityType:A.activityType,user:E,currentUserID:A.currentUserID,currentUserPartner:A.currentUserPartner,onlyFriends:A.onlyFriends,onlyNotes:A.onlyNotes},C)}}else{C.append('<tr><td><p class="j-empty font-color-meta-light">',(A.activityType=="bookmark")?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("acclaim.modal.empty.msg.bookmarks"),[])):(A.activityType=="like")?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("acclaim.modal.empty.msg.likes"),[])):(A.activityType=="follow")?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("acclaim.modal.empty.msg.follow"),[])):(A.activityType=="connections")?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("acclaim.modal.empty.msg.connections"),[])):(A.activityType=="membership")?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("acclaim.modal.empty.msg.membership"),[])):"","</p></td></tr>")}C.append("</tbody></table>");return G?"":C.toString()};jive.soy.acclaim.renderUserNotesList=function(A,G){var D=G||new soy.StringBuilder();D.append('<table id="',soy.$$escapeHtml(A.id),'" class="',soy.$$escapeHtml(A.classNames),'"',(!A.show)?' style="display: none;"':"","><tbody>");var C=A.users;var B=C.length;if(B>0){for(var E=0;E<B;E++){var F=C[E];if(F.prop.bookmarknotes){jive.soy.acclaim.displayUserRow({activityType:A.activityType,user:F,currentUserID:A.currentUserID,currentUserPartner:A.currentUserPartner,onlyFriends:A.onlyFriends,onlyNotes:A.onlyNotes},D)}}}else{D.append('<tr><td><p class="j-empty font-color-meta-light">There are no bookmark notes on this item</p></td></tr>')}D.append("</tbody></table>");return G?"":D.toString()};jive.soy.acclaim.displayYou=function(A,C){var B=C||new soy.StringBuilder();B.append('<a href="');jive.app.url({path:"/people/"+soy.$$escapeHtml(encodeURIComponent(A.username))},B);B.append('" data-userid="',soy.$$escapeHtml(A.ID),'" class="jiveTT-hover-user">',soy.$$escapeHtml(A.i18n.acclaimLikedYou),"</a>");return C?"":B.toString()};jive.soy.acclaim.displayUserRow=function(A,C){var B=C||new soy.StringBuilder();if(!A.onlyFriends||A.onlyFriends&&A.currentUserID!=A.user.id&&A.user.prop.connections.targetUserACurrentFriend){if(A.onlyNotes&&A.user.prop.hasBookmarknotes||!A.onlyNotes){B.append('<tr data-user-id="',soy.$$escapeHtml(A.user.id),'">');if(!A.onlyNotes){B.append('<td class="j-td-avatar ',(A.user.prop.hasBookmarknotes)?"j-td-topalign":"",'">');jive.shared.displayutil.avatar(soy.$$augmentData(A.user,{size:35,currentUserPartner:A.currentUserPartner}),B);B.append("</td>")}B.append('<td class="j-td-name">');if(A.currentUserID==A.user.id){jive.shared.displayutil.userDisplayNameLink(soy.$$augmentData(A.user,{displayNameOverride:jive.i18n.i18nText(jive.i18n.getMsg("global.you"),[])}),B)}else{jive.shared.displayutil.userDisplayNameLink(A.user,B)}B.append((!A.onlyNotes)?"<!-- TODO: show truncated version of the notes -->"+((A.activityType=="bookmark"&&A.user.prop.hasBookmarknotes&&A.user.prop.bookmarknotes)?'<p class="j-user-bookmark-notes">'+A.user.prop.bookmarknotes+"</p>":""):"<!-- TODO: show full, non-plain text / non-escaped version of the full notes -->"+((A.activityType=="bookmark"&&A.user.prop.hasBookmarknotes&&A.user.prop.bookmarknotes)?'<p class="j-user-bookmark-notes">'+A.user.prop.bookmarknotes+"</p>":""),"</td>");if(A.activityType!="bookmark"){if(!A.onlyNotes){B.append('<td class="j-td-follow">');if(A.user.prop.connections&&A.user.prop.connections.followLinkShown){if(A.user.id!=A.currentUserID&&A.user.visible){jive.people.profile.followLink(soy.$$augmentData(A.user.prop.connections,{targetUserID:A.user.id,targetUserDisplayName:A.user.displayName,hideFollowingCount:true,renderLocation:"bookmarked-user-list",streamsAssociatedCount:A.user.prop.connections.streamsAssociatedBean?A.user.prop.connections.streamsAssociatedBean.streamIDs.length:0}),B)}}B.append("</td>")}}B.append("</tr>")}}return C?"":B.toString()};jive.soy.acclaim.privateBookmarkNotification=function(A,C){var B=C||new soy.StringBuilder();B.append('<tr class="j-private-bookmark-notification j-js-private-bookmark-notification"><td colspan="3">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("acclaim.modal.privateBookmarks"),[])),"</td></tr>");return C?"":B.toString()}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.shared=="undefined"){jive.shared={}}if(typeof jive.shared.soy=="undefined"){jive.shared.soy={}}jive.shared.soy.actionLink=function(A,C){var B=C||new soy.StringBuilder();B.append("<a ",(A.id)?'id="'+soy.$$escapeHtml(A.id)+'"':"",' href="',soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,A.url)+"?"+jive.soy.func.buildParameterString(A.urlParams)),'" class="',(A.linkCss)?soy.$$escapeHtml(A.linkCss):"",(A.activeTab)?" j-ui-elem":"",'"',(A.urlParams&&A.urlParams.contentType)?'data-content-type="'+soy.$$escapeHtml(A.urlParams.contentType)+'"':"",(A.urlParams&&A.urlParams.containerType)?'data-container-type="'+soy.$$escapeHtml(A.urlParams.containerType)+'"':"",">",(!A.hideIcon)?'<span class="'+((A.iconCss)?soy.$$escapeHtml(A.iconCss):"")+" jive-icon-"+((A.iconSize)?soy.$$escapeHtml(A.iconSize):"med")+'"></span>':"",(A.subject)?soy.$$escapeHtml(A.subject):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg(A.nameKey),[])),(A.includeCounter)?' <span class="j-js-newCount j-rc5" style="display:none">'+((A.count)?soy.$$escapeHtml(A.count):"0")+"</span>":"","</a>");return C?"":B.toString()}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.shared=="undefined"){jive.shared={}}if(typeof jive.shared.soy=="undefined"){jive.shared.soy={}}jive.shared.soy.modal=function(A,C){var B=C||new soy.StringBuilder();B.append('<div class="jive-modal j-modal ',(A.modalCss)?soy.$$escapeHtml(A.modalCss):"",'"><header><h2>',(A.header)?A.header:"&nbsp;",'</h2></header><label class="j-508-label" id="close-modal-508">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.close.modal"),[])),'</label><a class="j-modal-close-top jive-close no-underline close ',(A.closeCss)?soy.$$escapeHtml(A.closeCss):"",'" href="#" aria-labelledby="close-modal-508" title="',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.close.modal"),[])),'">',(!A.closeText)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.close"),[])):soy.$$escapeHtml(A.closeText),' <span class="j-close-icon j-ui-elem" role="img"></span></a><section class="jive-modal-content clearfix ',(A.contentCss)?soy.$$escapeHtml(A.contentCss):"",'">',A.contents,"</section></div>");return C?"":B.toString()}
;
jive.namespace("Activity.Info");jive.Activity.Info.ActivityInfoView=jive.AbstractView.extend(function(a){var c=jQuery;function b(d){return d==="bookmark"}this.init=function(e){var d=this;this.$modal=null;this.pageSize=e.pageSize;this.soyParams={};this.renderModal=function(f){return $j(jive.soy.acclaim.renderAcclaimModal(f))};this.handleFollow=function(h){if(this.$modal){var g=this.$modal.find("table.js-everyone-list, table.js-friends-list"),f="tr[data-user-id="+h.id+"]";if(!g.eq(1).find(f).length){g.eq(0).find(f).clone().prependTo(g.eq(1).find("tbody"))}}};jive.switchboard.addListener("follow.user.complete",this.handleFollow.bind(this))};this.showUsers=function(d,i){var e=this,g={centered:true,destroyOnClose:true,closeFocusSelector:i.context,onClose:function(){$j(".js-pop").remove()}};this.soyParams=a.buildSoyParams(d,i);this.$modal&&this.$modal.remove();var f=this.renderModal(this.soyParams);if(b(d.activityType)){var h=jive.soy.acclaim.privateBookmarkNotification();f.find("table.js-everyone-list tbody").each(function(){$j(this).append(h)})}this.$modal=f.lightbox_me(g);this.$modal.find("#jive-view-picker input:checkbox").click(function(){var j=$j("#jive-view-picker input:checked");var k=0;if(j.length==1){k=j.val()}else{if(j.length==2){k=3}}e.$modal.find("table").hide();e.$modal.find("table").eq(k).show()});this.$modal.find(".jive-modal-content").endlessScroll({fireDelay:false,callback:function(j){if(e.soyParams.moreResults){e.emitP("loadUsersFromIndex",i,e.pageSize*j).addCallback(function(k){e.soyParams.moreResults=k.moreResults;e.appendUsers(k)})}}})};this.appendUsers=function(e){var j=e&&e.items?e.items:[];if(j.length>0){this.$modal.find(".j-js-private-bookmark-notification").remove();var d=this.$modal.find(".jive-modal-content tbody:visible");var g=d.parent().attr("id");var h=this.renderModal($j.extend({},this.soyParams,{users:j}));var f=h.find("table#"+g+" tr");d.append(f.clone());if(b(this.soyParams.activityType)){var i=jive.soy.acclaim.privateBookmarkNotification();d.append(i)}}};a.buildSoyParams=function(d,e){return{activityType:e.activityType,bidirectionalGraph:d.bidirectionalGraph,currentUserID:d.currentUserID,currentUserPartner:d.currentUserPartner,moreResults:d.moreResults,objectID:e.objectID,objectType:e.objectType,totalCount:d.totalCount,users:d.items,youID:e.youID||d.currentUserID,youPartner:e.youPartner||d.currentUserPartner}}});
;
jive.namespace("Activity");jive.Activity.ItemSource=jive.RestService.extend(function(a){a.resourceType="activity";a.pluralizedResourceType=a.resourceType;this.getContentActivityUsers=function(d,e,c){var b={cache:false,data:{count:c,start:e},url:[this.RESOURCE_ENDPOINT,"users",d.activityType,d.objectType,d.objectID].join("/")};return this.commonAjaxRequest(new jive.conc.Promise(),"GET",b)}});
;
jive.namespace("Activity.Info");jive.Activity.Info.Main=jive.oo.Class.extend(function(a){this.init=function(){this.pageSize=20;this.source=new jive.Activity.ItemSource();this.view=new jive.Activity.Info.ActivityInfoView({pageSize:this.pageSize});var b=this;this.view.addListener("loadUsersFromIndex",function(e,d,c){b.source.getContentActivityUsers(e,d,b.pageSize).addCallback(function(f){c.emitSuccess(f)})})};this.showUsers=function(e,d){var b=this.view,c=new jive.conc.Promise();this.source.getContentActivityUsers(e,d,this.pageSize).addCallback(function(f){b.showUsers(f,e);c.emitSuccess($j.extend({totalCount:f.totalCount},e))}).addErrback(function(){c.emitError()});return c}});
;
if(!jive.acclaim){jive.acclaim=(function(c){var b=jive.conc.observable({}),a=new jive.Activity.Info.Main(),d={showBookmarks:"bookmark",showChildren:"children",showConnections:"connections",showFollowers:"follow",showLikes:"like",showMembers:"membership"};jive.dispatcher.listen(Object.keys(d),function(f,e){f=c.extend({activityType:d[e]},f);delete f.count;delete f.command;var g=c.extend({objectID:f.objectId,context:this},f);delete g.objectId;b.emit("beforeFetch",f);a.showUsers(g,0).addCallback(function(h){b.emit("afterFetch",c.extend({totalCount:h.totalCount},f))}).addErrback(function(){b.emit("afterFetch",f)})});return b})(jQuery)};
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.eae=="undefined"){jive.eae={}}if(typeof jive.eae.acclaim=="undefined"){jive.eae.acclaim={}}jive.eae.acclaim.count=function(A,C){var B=C||new soy.StringBuilder();jive.eae.acclaim.countLabel(A,B);B.append("<a ",(A.id)?'id="'+soy.$$escapeHtmlAttribute(A.id)+'"':""," ",(A.classes)?'class="'+soy.$$escapeHtmlAttribute(A.classes)+'"':"",' data-command="',soy.$$escapeHtmlAttribute(A.command),'" data-object-id="',soy.$$escapeHtmlAttribute(A.objectId),'" data-object-type="',soy.$$escapeHtmlAttribute(A.objectType),'" data-count="',soy.$$escapeHtmlAttribute(A.count),'" href="#" role="button"');jive.eae.acclaim.labelledBy__Ce4(A,B);B.append("</a>");return C?"":B.toString()};jive.eae.acclaim.countLabel=function(A,C){var B=C||new soy.StringBuilder();B.append((A.accessibilityLinkLabel)?'<label class="j-508-label" id="'+soy.$$escapeHtmlAttribute(A.command)+"-"+soy.$$escapeHtmlAttribute(A.objectId)+"-"+soy.$$escapeHtmlAttribute(A.objectType)+'-count-label">'+soy.$$escapeHtml(A.accessibilityLinkLabel)+"</label>":"");return C?"":B.toString()};jive.eae.acclaim.labelledBy=function(A,C){var B=C||new soy.StringBuilder();B.append((A.accessibilityLinkLabel)?'aria-labelledby="'+soy.$$escapeHtml(A.command)+"-"+soy.$$escapeHtml(A.objectId)+"-"+soy.$$escapeHtml(A.objectType)+'-count-label"':"",">",(A.text)?soy.$$escapeHtml(A.text):soy.$$escapeHtml(A.count));return C?"":B.toString()};jive.eae.acclaim.labelledBy__Ce4=function(A,C){var B=C||new soy.StringBuilder();B.append((A.accessibilityLinkLabel)?'aria-labelledby="'+soy.$$escapeHtmlAttribute(A.command)+"-"+soy.$$escapeHtmlAttribute(A.objectId)+"-"+soy.$$escapeHtmlAttribute(A.objectType)+'-count-label"':"",">",(A.text)?soy.$$escapeHtml(A.text):soy.$$escapeHtml(A.count));return C?"":B.toString()}
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.BookmarkApp=="undefined"){jive.BookmarkApp={}}if(typeof jive.BookmarkApp.soy=="undefined"){jive.BookmarkApp.soy={}}jive.BookmarkApp.soy.bookmarkLink=function(B,E){var C=E||new soy.StringBuilder();if(B.legacy){C.append((!B.bookmarked)?'<a href="#" class="bookmark-content"><span class="jive-icon-med jive-icon-bookmark-ribbonaction-grey"></span>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("bookmarks.action.bookmark.this"),[]))+"</a>":'<span class="bookmarked-content"><span class="jive-icon-med jive-icon-bookmark-ribbonaction"></span>'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("bookmarks.activity.bookmarked"),[]))+'(<a href="#" class="edit-bookmark">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.edit"),[]))+'</a> |<a href="#" class="unbookmark-content">'+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.remove"),[]))+"</a>)</span>")}else{if(!B.bookmarked){C.append('<a href="#" class="bookmark-content j-social-action"><span class="jive-icon-med jive-icon-bookmark-ribbonaction-grey"></span>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.bookmark"),[])),"</a>");var A=new soy.StringBuilder();jive.shared.soy.getCountTextByType({count:B.bookmarkCount,type:"showbookmarkscount"},A);jive.eae.acclaim.count({command:"showBookmarks",count:B.bookmarkCount,objectId:B.objectId,objectType:B.objectType,classes:"j-people-count j-rc3",accessibilityLinkLabel:A.toString()},C)}else{C.append('<a href="#" class="bookmarked-content j-social-action"><span class="jive-icon-med jive-icon-bookmark-ribbonaction"></span>',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("bookmarks.activity.bookmarked"),[])),'<span class="jive-icon-sml jive-icon-arrow-select"></span></a>');var D=new soy.StringBuilder();jive.shared.soy.getCountTextByType({count:B.bookmarkCount,type:"showbookmarkscount"},D);jive.eae.acclaim.count({command:"showBookmarks",count:B.bookmarkCount,objectId:B.objectId,objectType:B.objectType,classes:"j-people-count j-rc3",accessibilityLinkLabel:D.toString()},C);C.append('<div class="js-bookmark-actions j-menu" style="display: none;"><ul><li><a href="#" class="edit-bookmark">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.edit"),[])),'</a></li><li><a href="#" class="unbookmark-content">',soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("global.remove"),[])),"</a></li></ul></div>")}}return E?"":C.toString()};jive.BookmarkApp.soy.layout=function(A,C){var B=C||new soy.StringBuilder();jive.shared.soy.resourceInlineJs({code:"(function() {var bookmarkApp = new jive.BookmarkApp.Main({element: '#bookmark-app-"+soy.$$escapeHtml(A.instanceID)+"', bookmark: {"+((A.bookmark.id)?"id: '"+soy.$$escapeHtml(A.bookmark.id)+"',":"")+((A.bookmark.bookmarkCount)?"bookmarkCount: "+soy.$$escapeHtml(A.bookmark.bookmarkCount)+",":"")+"markedObjectType: '"+soy.$$escapeJsString(A.bookmark.markedObjectType)+"', markedObjectId: '"+soy.$$escapeJsString(A.bookmark.markedObjectId)+"'}, createModalAction: '"+soy.$$escapeHtml(jive.soy.func.normalizeUrl(window._jive_base_url,"create-favorite-popup!input.jspa"))+"', legacy: "+soy.$$escapeHtml(A.legacy)+"});})();"},B);B.append('<div class="bookmark-controls" data-object-type="',soy.$$escapeHtml(A.bookmark.markedObjectType),'" data-object-id="',soy.$$escapeHtml(A.bookmark.markedObjectId),'" id="bookmark-app-',soy.$$escapeHtml(A.instanceID),'" data-count="',soy.$$escapeHtml(A.bookmark.bookmarkCount),'">');jive.BookmarkApp.soy.bookmarkLink({bookmarked:A.bookmark.id,bookmarkCount:A.bookmark.bookmarkCount,legacy:A.legacy,objectId:A.bookmark.markedObjectId,objectType:A.bookmark.markedObjectType},B);B.append("</div>");return C?"":B.toString()}
;
jive.namespace("BookmarkApp");jive.BookmarkApp.Main=jive.oo.Class.extend(function(a){var b=jive.BookmarkApp,c=jQuery;a.init=function(e){var d=this;this.element=e.element;this.bookmark=c.extend({},e.bookmark);this.legacy=e.legacy;this.inProgress={};this.createModalAction=e.createModalAction;c(document).ready(function(){d.bookmarkSource=new jive.BookmarkSource();if(d.element){d.linkView=d.buildLinkView(d.element);jive.switchboard.addListener("bookmark.create",function(f){d.update(f,function(){d.bookmark.id=f.id;d.linkView.updateLink({bookmarked:true,legacy:d.legacy,bookmarkCount:f.bookmarkCount,objectId:f.markedObjectId,objectType:f.markedObjectType})})}).addListener("bookmark.destroy",function(f){d.update(f,function(){delete d.bookmark.id;d.linkView.updateLink({bookmarked:false,legacy:d.legacy,bookmarkCount:f.bookmarkCount,objectId:f.markedObjectId,objectType:f.markedObjectType})})})}else{d.listView=d.buildListView();jive.switchboard.addListener("bookmark.create",function(f){d.listView.updateBookmarkLinks(f)}).addListener("bookmark.destroy",function(f){d.listView.updateUnbookmarkLinks(f)})}})};a.buildLinkView=function(e){var f=new b.LinkView(e),d=this;f.addListener("bookmark",function(){var g=d.key();if(!d.inProgress[g]){d.bookmarkSource.save(d.bookmark).addCallback(function(h){d.bookmark=$j.extend(d.bookmark,{id:h.id,bookmarkCount:h.bookmarkCount});jive.switchboard.emit("bookmark.create",d.bookmark);delete d.inProgress[g]});d.inProgress[g]=true}});f.addListener("unbookmark",function(){var g=d.key();if(!d.inProgress[g]){d.bookmarkSource.destroy(d.bookmark.id).addCallback(function(){--d.bookmark.bookmarkCount;jive.switchboard.emit("bookmark.destroy",c.extend({},d.bookmark));delete d.inProgress[g]});d.inProgress[g]=true}});f.addListener("edit",function(){var g={contentObjectType:d.bookmark.markedObjectType,object:d.bookmark.markedObjectId};d.loadModal(g)});return f};a.buildListView=function(){var e=new b.ListView(),d=this;e.addListener("bookmark",function(g){var f=d.key(g);if(!d.inProgress[f]){d.bookmarkSource.save(g).addCallback(function(h){d.bookmark=$j.extend(g,{id:h.id,bookmarkCount:h.bookmarkCount});jive.switchboard.emit("bookmark.create",d.bookmark);delete d.inProgress[f]});d.inProgress[f]=true}});e.addListener("unbookmark",function(g){var f=d.key(g);if(!d.inProgress[f]){d.bookmarkSource.destroy(g.id).addCallback(function(){--g.bookmarkCount;jive.switchboard.emit("bookmark.destroy",c.extend({},g));delete d.inProgress[f]});d.inProgress[f]=true}});e.addListener("edit",function(f){var g={contentObjectType:f.markedObjectType,object:f.markedObjectId};d.loadModal(g,f)});return e};a.loadModal=function(f,e){var d=this;if(!this.modalOpen){this.modalOpen=true;c.get(d.createModalAction,f,function(g){var h=c(g);c("body").append(h);d.populateModal(h.filter(":first"),e,function(){d.modalOpen=false})})}};a.populateModal=function(e,d,f){e.lightbox_me({initialFocusSelector:'input[type="text"], textarea, .jive-js-statusinput',additionalFocusSelectors:"div[contenteditable]",onClose:function(){f();e.remove()},onLoad:function(){$j('label[for="notes"]').click(function(g){g.preventDefault();$j(this).siblings(".jive-form-element-text").find("div[contenteditable]").first().focus()})}});e.find("form").ajaxForm({cache:false,success:function(){e.trigger("close");jive.switchboard.emit("bookmark.update",c.extend({},d))}});c("html,body").animate({scrollTop:0},500)};a.update=function(d,e){if(d.markedObjectType===this.bookmark.markedObjectType&&d.markedObjectId===this.bookmark.markedObjectId){e()}};a.key=function(d){d=d||this.bookmark;return String(d.markedObjectType)+"-"+String(d.markedObjectId)}});
;
jive.BookmarkSource=jive.RestService.extend(function(a){a.resourceType="bookmark"});
;
jive.namespace("BookmarkApp");jive.BookmarkApp.LinkView=jive.AbstractView.extend(function(a){var c=jQuery,b=jive.BookmarkApp;jive.conc.observable(this);a.init=function(d){this.content=c(d);this.bindClickEvents()};a.bindClickEvents=function(){var d=this;this.content.find(".bookmark-content").click(function(f){d.showSpinner(c(this));d.emit("bookmark");f.preventDefault()});this.content.find(".unbookmark-content").click(function(f){d.showSpinner(d.content.find(".bookmarked-content"));d.emit("unbookmark");c(this).trigger("close");f.preventDefault()});this.content.find(".edit-bookmark").click(function(f){d.emit("edit");c(this).trigger("close");f.preventDefault()});this.content.find(".bookmarked-content").click(function(h){var g=d.content.find(".js-bookmark-actions");var f=c(this).toggleClass("active");g.popover({context:c(this).find(".jive-icon-arrow-select"),darkPopover:true,destroyOnClose:false,putBack:true,onClose:function(){f.removeClass("active")}});h.preventDefault()})};this.updateLink=function(d){this.content.html(b.soy.bookmarkLink(d));this.content.find("a.j-social-action").focus();this.bindClickEvents()};a.getContent=function(){return this.content};a.createSpinner=function(d){d.addClass("font-color-meta-light")};a.destroySpinner=function(d){d.removeClass("font-color-meta-light")}});
;
jive.namespace("BookmarkApp");jive.BookmarkApp.ListView=jive.AbstractView.extend(function(a){var c=jQuery,b=jive.BookmarkApp;a.init=function(){var d=this;c(document).delegate(".bookmark-content","click",function(h){var f=c(this).data("objecttype");var i=c(this).data("objectid");var g={markedObjectType:f,markedObjectId:i};d.showSpinner(c(this));d.emit("bookmark",g);h.preventDefault()});c(document).delegate(".unbookmark-content","click",function(j){var g=c(this).data("bookmarkid");var h=c(this).data("objecttype");var k=c(this).data("objectid");var i={id:g,markedObjectType:h,markedObjectId:k};var f=c(".bookmarked-content").filter(function(){return c(this).data("objecttype")==h&&c(this).data("objectid")==k});d.showSpinner(f);d.emit("unbookmark",i);c(this).trigger("close");j.preventDefault()});c(document).delegate(".edit-bookmark","click",function(h){var f=c(this).data("objecttype");var i=c(this).data("objectid");var g={markedObjectType:f,markedObjectId:i};d.emit("edit",g);c(this).trigger("close");h.preventDefault()});c(document).delegate(".bookmarked-content","click",function(h){var g=c(this).closest("ul").find(".js-bookmark-actions");var f=c(this).toggleClass("active");g.popover({context:c(this),darkPopover:true,destroyOnClose:false,putBack:true,onClose:function(){f.removeClass("active")}});h.preventDefault()})};this.updateBookmarkLinks=function(d){return this.updateLinks(d,false)};this.updateUnbookmarkLinks=function(d){return this.updateLinks(d,true)};a.updateLinks=function(g,d){var f=d?"a.bookmarked-content":"a.bookmark-content",e=this;c(f).filter(function(){return c(this).data("objecttype")==g.markedObjectType&&c(this).data("objectid")==g.markedObjectId}).each(function(){var j=c(this).closest(".js-bookmark"),i=j.find(".bookmark-content"),h=j.find(".bookmarked-content"),k=j.find(".unbookmark-content");if(d){h.hide();i.show();i.focus()}else{i.hide();h.show();h.focus()}k.data("bookmarkid",d?"-1":g.id);e.hideSpinner(c(this))})};a.createSpinner=function(d){d.addClass("font-color-meta-light")};a.destroySpinner=function(d){d.removeClass("font-color-meta-light")}});
;
if(typeof jive=="undefined"){var jive={}}if(typeof jive.eae=="undefined"){jive.eae={}}if(typeof jive.eae.acclaim=="undefined"){jive.eae.acclaim={}}jive.eae.acclaim.likeControl=function(A,C){var B=C||new soy.StringBuilder();switch(A.type){case"medium":jive.eae.acclaim.acclaimContainerMedium(A,B);break;case"mini":jive.eae.acclaim.activityAcclaimLinkContainer(A,B);break;case"small":B.append('<span class="j-js-liking-control">');jive.eae.acclaim.activityAcclaimLinkContainer(A,B);B.append("</span>");break}return C?"":B.toString()};jive.eae.acclaim.activityAcclaimLinkContainer=function(A,D){var B=D||new soy.StringBuilder();B.append((A.showIcon)?'<span class="jive-icon-sml jive-'+((A.showGlyph)?"glyph":"icon")+'-like"></span>':"",'<span id="acclaim-container-',soy.$$escapeHtmlAttribute(A.objectType),"-",soy.$$escapeHtmlAttribute(A.objectId),'" class="acclaim-container"><span id="jive-acclaim-like-container-',soy.$$escapeHtmlAttribute(A.objectType),"-",soy.$$escapeHtmlAttribute(A.objectId),'" data-likes="',soy.$$escapeHtmlAttribute(A.likeCount),'" data-can-like="',soy.$$escapeHtmlAttribute(A.canLike),'" data-type="',(A.type)?soy.$$escapeHtmlAttribute(A.type):"mini",'" data-showicon="',soy.$$escapeHtmlAttribute(A.showIcon),'" class="js-acclaim-container acclaim-like-container font-color-meta-light"><span class="j-social-action">');jive.eae.acclaim.expressLike(soy.$$augmentData(A,{disabled:!A.canLike,iconType:"none",type:(A.liked)?"unlike":"like",classes:"jive-acclaim-likelink"}),B);B.append(" ");var C=new soy.StringBuilder();jive.shared.soy.getCountTextByType({count:A.likeCount,type:"showlikescount"},C);jive.eae.acclaim.count(soy.$$augmentData(A,{command:"showLikes",count:A.likeCount,classes:"jive-acclaim-likedlink",text:"("+soy.$$escapeHtml(A.likeCount)+")",accessibilityLinkLabel:C.toString()}),B);B.append("</span></span></span>");return D?"":B.toString()};jive.eae.acclaim.acclaimContainerMedium=function(A,D){var B=D||new soy.StringBuilder();B.append("<span>");if(A.canLike){jive.eae.acclaim.expressLike(soy.$$augmentData(A,{disabled:!A.canLike,iconType:"medium",type:(A.liked)?"unlike":"like",classes:"jive-acclaim-likelink j-social-action"}),B)}else{B.append('<span class="j-social-action"><span class="jive-icon-med jive-icon-like"></span>',(A.liked)?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("acclaim.liking.unlike"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("acclaim.liking.like"),[])),"</span>")}var C=new soy.StringBuilder();jive.shared.soy.getCountTextByType({count:A.likeCount,type:"showlikescount"},C);jive.eae.acclaim.count(soy.$$augmentData(A,{command:"showLikes",count:A.likeCount,classes:"j-people-count j-rc3 jive-acclaim-likedlink",accessibilityLinkLabel:C.toString()}),B);B.append("</span>");return D?"":B.toString()};jive.eae.acclaim.expressLike=function(A,C){var B=C||new soy.StringBuilder();B.append((!A.disabled)?"<a "+((A.id)?'id="'+soy.$$escapeHtmlAttribute(A.id)+'"':"")+'class="'+((A.classes)?soy.$$escapeHtmlAttribute(A.classes):"")+" "+soy.$$escapeHtmlAttribute(A.type)+'" data-command="'+soy.$$escapeHtmlAttribute(A.type)+'" data-object-id="'+soy.$$escapeHtmlAttribute(A.objectId)+'" data-object-type="'+soy.$$escapeHtmlAttribute(A.objectType)+'" title="'+((A.type=="like")?soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("acclaim.liking.like"),[])):soy.$$escapeHtmlAttribute(jive.i18n.i18nText(jive.i18n.getMsg("acclaim.liking.unlike"),[])))+'" href="#">'+((A.iconType!="none")?'<span class="jive-icon-'+((A.iconType=="small")?"sml":(A.iconType=="medium")?"med":"")+' jive-icon-like"></span>':"")+((A.type=="like")?soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("acclaim.liking.like"),[])):soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("acclaim.liking.unlike"),[])))+"</a>":((A.iconType!="none")?'<span class="jive-icon-'+((A.iconType=="small")?"sml":(A.iconType=="medium")?"med":"")+' jive-icon-like"></span>':"")+soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("acclaim.liking.like"),[])));return C?"":B.toString()};jive.eae.acclaim.likeConfirmation=function(A,C){var B=C||new soy.StringBuilder();B.append("<p>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("acclaim.like.confirm"),[])),"</p>");return C?"":B.toString()};jive.eae.acclaim.unlikeConfirmation=function(A,C){var B=C||new soy.StringBuilder();B.append("<p>",soy.$$escapeHtml(jive.i18n.i18nText(jive.i18n.getMsg("acclaim.unlike.confirm"),[])),"</p>");return C?"":B.toString()}
;
jive.namespace("Liking");jive.Liking.LikeSource=jive.RestService.extend(function(a){jive.conc.observable(this);a.resourceType="acclaim";a.pluralizedResourceType=a.resourceType;this.getLikes=function(c,e){var d=this.RESOURCE_ENDPOINT+"/"+c+"/"+e+"/scoredisplay";var b="like";return this.commonAjaxRequest(new jive.conc.Promise(),"POST",{url:d,data:{ratingType:b}})};this.getLikeData=function(c,e){var d=this.RESOURCE_ENDPOINT+"/"+c+"/"+e;var b="like";return this.commonAjaxRequest(new jive.conc.Promise(),"GET",{url:d,data:{ratingType:b}})};this.setLiked=function(b,d,e){var c,g,h="like",j=1,k=new jive.conc.Promise();if(b){var f="";g={ratingType:h,voteValue:j};if(jive.Trial&&jive.Trial.Controller){var i=jive.Trial.Controller.getActiveQuestAndStep();if(i.activeQuestID=="1836538113"&&i.activeQuestStep==1){g.fromQuest=i.activeQuestID;k.addCallback(function(){jive.dispatcher.dispatch("trial.like.created");jive.dispatcher.dispatch("trial.updatePercentComplete")})}}c="/"+this.resourceType+"/"+d+"/"+e+"/addvote"}else{c="/"+this.resourceType+"/"+d+"/"+e+"/removevote";g={ratingType:h}}$j.post(jive.rest.url(c),g,function(){k.emitSuccess()});return k}});
;
if(!jive.Like){jive.namespace("Like",(function(c,d){function b(k,j,e,h){var l=k.closest(".js-acclaim-container"),g,f=l.data("likes"),m={canLike:true,liked:j,objectId:h,objectType:e,type:l.data("type"),showIcon:l.data("showicon")};f+=j?1:-1;f=f<0?0:f;m.likeCount=f;switch(m.type){case"mini":g=k.closest(".j-js-liking-control").html(d(m));break;case"medium":g=l.data("likes",f).html(d(m));break;case"small":g=$j(d($j.extend({showGlyph:true},m)));var i=l.closest(".j-js-liking-control");if(i.length>0){i.replaceWith(g)}else{l.replaceWith(g)}break;default:throw"Unknown widget type"}if(g){g.find("a. jive-acclaim-likelink").focus()}}var a={};jive.dispatcher.listen(["like","unlike"],function(i,f,h){var e=i.objectType+"_"+i.objectId;if(a[e]){console.log("duplicate like request, ignoring",i,f,h);return}else{a[e]=true}var g=f==="like";c.setLiked(g,i.objectType,i.objectId).addCallback(function(){if(g){$j(jive.eae.acclaim.likeConfirmation()).message({style:"success"})}else{$j(jive.eae.acclaim.unlikeConfirmation()).message({style:"success"})}b($j(h),g,i.objectType,i.objectId);jive.switchboard.emit("acclaim.recorded",g,i.objectType,i.objectID)}).always(function(){delete a[e]})});return{}})(new jive.Liking.LikeSource({}),jive.eae.acclaim.likeControl))};
;
